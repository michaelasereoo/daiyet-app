module.exports=[27167,a=>{"use strict";var b=a.i(28109),c=a.i(85007),d=a.i(82138),e=a.i(90470),f=a.i(92373),g=a.i(15715),h=a.i(34568),i=a.i(41164),j=a.i(31960),k=a.i(87804),l=a.i(11842),m=a.i(47417),n=a.i(92177),o=a.i(56775),p=a.i(85109),q=a.i(24929),r=a.i(35645),s=a.i(89973),t=a.i(11672),u=a.i(34006),v=a.i(58467),w=a.i(94675);process.env.SUPABASE_SERVICE_ROLE_KEY;let x=null;function y(){if(x)return x;try{x=(0,w.createComponentClient)()}catch(a){x=(0,w.createComponentClient)()}return x}let z={get auth(){return y().auth},get from(){return y().from},get storage(){return y().storage},get functions(){return y().functions},get realtime(){return y().realtime}};var A=a.i(36171),B=a.i(11258);function C(){let a=(0,d.useSearchParams)(),w=(0,d.useRouter)(),x="true"===a.get("prefill"),y="true"===a.get("reschedule"),C=a.get("dietitianId"),D=a.get("eventTypeId"),E=a.get("requestId"),F=a.get("message"),G=x&&C||y?3:1,[H,I]=(0,c.useState)(G),[J,K]=(0,c.useState)({name:"",email:"",age:"",occupation:"",medicalCondition:"",monthlyFoodBudget:"",complaint:""}),[L,M]=(0,c.useState)(null),[N,O]=(0,c.useState)(null),[P,Q]=(0,c.useState)(""),[R,S]=(0,c.useState)(""),T=[{id:"1-on-1-nutritional-counselling-and-assessment",title:"1-on-1 Nutritional Counselling and Assessment",slug:"1-on-1-nutritional-counselling-and-assessment",description:"Have one on one consultation with Licensed Dietitician [Nutritional counseling and assessment]",length:45,price:15e3,currency:"NGN"},{id:"1-on-1-nutritional-counselling-and-assessment-meal-plan",title:"1-on-1 Nutritional Counselling and Assessment + Meal Plan",slug:"1-on-1-nutritional-counselling-and-assessment-meal-plan",description:"Comprehensive nutritional counselling and assessment session with a personalized 7-day meal plan included.",length:45,price:25e3,currency:"NGN"},{id:"monitoring",title:"Monitoring",slug:"monitoring",description:"Monitoring consultation",length:20,price:5e3,currency:"NGN"},{id:"test-event",title:"Test Event",slug:"test-event",description:"Test event for payment testing",length:15,price:100,currency:"NGN"}],[U,V]=(0,c.useState)(T),[W,X]=(0,c.useState)(!1);(0,c.useEffect)(()=>{!aK&&T.length>0&&(aJ(T),aL(T[0].id),ax(T[0].price))},[]);let[Y,Z]=(0,c.useState)(C||""),[$,_]=(0,c.useState)(null),[aa,ab]=(0,c.useState)(null),[ac,ad]=(0,c.useState)(!1),[ae,af]=(0,c.useState)(new Map),[ag,ah]=(0,c.useState)({}),[ai,aj]=(0,c.useState)((0,A.default)()),[ak,al]=(0,c.useState)(null),[am,an]=(0,c.useState)(""),[ao,ap]=(0,c.useState)(null),[aq,ar]=(0,c.useState)(!1),[as,at]=(0,c.useState)(!1),[au,av]=(0,c.useState)(null),[aw,ax]=(0,c.useState)(15e3),[ay,az]=(0,c.useState)(""),[aA,aB]=(0,c.useState)(""),[aC,aD]=(0,c.useState)(""),[aE,aF]=(0,c.useState)([]),[aG,aH]=(0,c.useState)(!0),[aI,aJ]=(0,c.useState)([]),[aK,aL]=(0,c.useState)(D||""),[aM,aN]=(0,c.useState)([]),[aO,aP]=(0,c.useState)(!1),[aQ,aR]=(0,c.useState)(!1),[aS,aT]=(0,c.useState)(()=>[]),aU=aI.find(a=>a.id===aK),aV=aU?.length||45,{data:aW,isLoading:aX}=function({dietitianId:a,eventTypeId:b,startDate:d,endDate:e,durationMinutes:f=30,initialData:g,enabled:h=!0}){let[i,j]=(0,c.useState)(g),[k,l]=(0,c.useState)(!1),[m,n]=(0,c.useState)(null),o=(0,c.useRef)(null),p=(0,c.useRef)(0),q=(0,c.useRef)(0),r=(0,c.useRef)(!0),s=(0,c.useCallback)(()=>{let a=3e4*Math.pow(2,Math.min(q.current,5)),b=.3*Math.random()*a;return Math.min(a+b,3e5)},[]),t=(0,c.useCallback)(async(c=!1)=>{if(!h||!a||!d||!e)return;let g=Date.now();if(!(g-p.current<1e4)||c){l(!0);try{let c=new URLSearchParams({dietitianId:a,startDate:d.toISOString().split("T")[0],endDate:e.toISOString().split("T")[0],duration:f.toString()});b&&c.append("eventTypeId",b);let h=await fetch(`/api/availability/timeslots?${c.toString()}`,{credentials:"include",headers:{"Cache-Control":"no-cache",Pragma:"no-cache"}});if(!h.ok)throw Error(`HTTP ${h.status}`);let i=await h.json();j(i),n(null),q.current=0,p.current=g}catch(a){q.current++,n(a instanceof Error?a.message:"Fetch failed")}finally{l(!1)}}},[a,b,d,e,f,h]);return(0,c.useEffect)(()=>{let a=()=>{let a=!r.current;r.current=!document.hidden,!document.hidden&&a&&Date.now()-p.current>12e4&&t(!0)};return document.addEventListener("visibilitychange",a),()=>{document.removeEventListener("visibilitychange",a)}},[t]),(0,c.useEffect)(()=>{if(!h||!a||!d||!e)return;let b=()=>{r.current?(t(),o.current&&clearTimeout(o.current),o.current=setTimeout(b,s())):(o.current&&clearTimeout(o.current),o.current=setTimeout(b,3e4))};return t(),o.current=setTimeout(b,s()),()=>{o.current&&clearTimeout(o.current)}},[a,b,d,e,h,t,s]),{data:i,isLoading:k,error:m,refetch:t}}({dietitianId:Y||"",eventTypeId:aK||void 0,startDate:ak?new Date(ak):void 0,endDate:ak?(0,A.default)(ak).add(1,"day").toDate():void 0,durationMinutes:aV,enabled:!!ak&&!!Y&&!!aK});(0,c.useEffect)(()=>{aW&&ak?(aN((aW.slots||[]).filter(a=>(0,A.default)(a.start).isSame((0,A.default)(ak),"day")).map(a=>(0,A.default)(a.start).format("HH:mm"))),aP(!1),Y&&aK&&(0,A.default)(ak).format("YYYY-MM")):aX&&aP(!0)},[aW,ak,aX,Y,aK]);let aY=ai.startOf("month"),aZ=ai.daysInMonth(),a$=aY.day(),a_=async a=>{al(a)};(0,c.useEffect)(()=>{if(Y&&aK){let a=async()=>{aR(!0);try{let a=ai.startOf("month").format("YYYY-MM-DD"),b=ai.add(1,"month").endOf("month").format("YYYY-MM-DD"),c=aU?.length||45,d=`/api/availability/timeslots?dietitianId=${Y}&startDate=${a}&endDate=${b}&duration=${c}&eventTypeId=${aK}`;console.log("ðŸ“… [PRELOAD] Fetching availability for 2 months:",{startDate:a,endDate:b,dietitianId:Y,eventTypeId:aK,duration:c});let e=await fetch(d,{credentials:"include"});if(e.ok){let a=await e.json();console.log("âœ… [PRELOAD] Availability data received:",{slotsCount:a.slots?.length||0,timezone:a.timezone});let b=new Set((a.slots||[]).filter(a=>(0,A.default)(a.start).isSame(ai,"month")).map(a=>(0,A.default)(a.start).format("D")));aT(Array.from(b)),console.log("ðŸ“Š [PRELOAD] Available dates set:",Array.from(b))}else{let a=await e.json().catch(()=>({}));console.error("âŒ [PRELOAD] Fetch failed:",{status:e.status,error:a.error})}}catch(a){console.error("âŒ [PRELOAD] Error fetching available dates:",a)}finally{aR(!1)}};(async()=>{try{ai.format("YYYY-MM"),a()}catch(a){console.error("âŒ [INSTANT] Error in preload:",a)}})()}},[Y,aK,aU,ai]),(0,c.useEffect)(()=>{(async()=>{try{aH(!0);let a=await fetch("/api/dietitians",{credentials:"include"});if(a.ok){let b=((await a.json()).dietitians||[]).map(a=>({id:a.id,name:a.name,qualification:a.qualification||"Licensed Dietitian",profileImage:a.image||void 0,description:a.description||a.bio||"Professional nutritionist ready to help you achieve your health goals."}));aF(b),console.log("âœ… Fetched dietitians:",b.length);let c=b.map(async a=>{try{let b=await fetch(`/api/dietitians/${a.id}`,{credentials:"include"});if(b.ok){let c=await b.json(),d={id:c.profile.id,name:c.profile.name,email:c.profile.email,bio:c.profile.bio,image:c.profile.image,specialization:c.profile.specialization,licenseNumber:c.profile.licenseNumber,experience:c.profile.experience,location:c.profile.location,qualifications:c.profile.qualifications||[],updatedAt:c.profile.updatedAt};return{id:a.id,profile:d}}}catch(b){console.warn(`âš ï¸ Failed to preload profile for ${a.id}:`,b)}return null}),d=await Promise.all(c),e=new Map;d.forEach(a=>{a&&e.set(a.id,a.profile)}),af(e),console.log(`âœ… Preloaded ${e.size} dietitian profiles`)}else{let b=await a.json().catch(()=>({}));console.error("Error fetching dietitians:",b)}}catch(a){console.error("Error fetching dietitians:",a)}finally{aH(!1)}})()},[]),(0,c.useEffect)(()=>{Y&&U.length>0&&(async()=>{try{let a=await fetch(`/api/event-types?dietitianId=${Y}`,{credentials:"include"});if(a.ok){let b=(await a.json()).eventTypes||[];V(a=>{let c=a.map(a=>{let c=b.find(b=>b.slug===a.slug);return c?{...a,id:c.id,description:c.description||a.description}:a});if(aK&&aK.length<36){let a=c.find(a=>a.slug===aK||a.id===aK);a&&a.id!==aK&&aL(a.id)}return c}),aJ(b)}}catch(a){console.error("Error fetching real event types:",a)}})()},[Y]),(0,c.useEffect)(()=>{let a=J.name||L?.name||R||"",b=J.email||L?.email||P||"";aB(a),aD(b),console.log("ðŸ‘¤ [DEBUG] User name/email updated:",{formDataName:J.name,formDataEmail:J.email,userProfileName:L?.name,userProfileEmail:L?.email,sessionName:R,sessionEmail:P,finalName:a,finalEmail:b})},[J.name,J.email,L,R,P]),(0,c.useEffect)(()=>{5===H&&(async()=>{try{let{data:{session:a}}=await z.auth.getSession();if(a?.user?.email){let b=a.user.email;console.log("ðŸ“§ [DEBUG] Force-setting email from authenticated session for order summary:",b),Q(b),aD(b),K(a=>({...a,email:b}))}else console.warn("âš ï¸ [DEBUG] No email in session for order summary")}catch(a){console.error("Error fetching session email for order summary:",a)}})()},[H]),(0,c.useEffect)(()=>{try{let b=a.get("payment"),c=a.get("reference");if(!b)return;if("success"===b&&c)(async()=>{try{let a=await fetch("/api/payments/verify",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({reference:c})});if(a.ok){let b=(await a.json()).payment;if(b?.booking_id){let a=await fetch(`/api/bookings/${b.booking_id}`,{credentials:"include"});if(a.ok){let c=(await a.json()).booking;if(!c)return void console.error("Booking not found in response");let d="";aE.length>0&&(d=aE.find(a=>a.id===c.dietitian_id)?.name||"");let e="45m";if(aI.length>0){let a=aI.find(a=>a.id===c.event_type_id);e=`${a?.length||45}m`}let f=(0,A.default)(c.start_time);ap({id:c.id,date:f.toDate(),time:f.format("HH:mm"),dietician:d,duration:e,meetingLink:c.meeting_link||""}),av({amount:b.amount||aw,currency:b.currency||"NGN"}),I(7),setTimeout(()=>{w.replace("/user-dashboard/book-a-call",{scroll:!1})},100)}else console.error("Failed to fetch booking:",await a.text())}}else console.error("Failed to verify payment:",await a.text())}catch(a){console.error("Error verifying payment:",a)}})();else if("error"===b){let b=a.get("message");console.error("Payment error:",b),setTimeout(()=>{w.replace("/user-dashboard/book-a-call",{scroll:!1})},100)}}catch(a){console.error("Error in payment callback handler:",a)}},[a,w]),(0,c.useEffect)(()=>{(async()=>{try{let{data:{session:a}}=await z.auth.getSession();if(a?.user){let b=a.user.user_metadata?.name||a.user.user_metadata?.full_name||"",c=a.user.email||"";S(b),Q(c),console.log("ðŸ‘¤ [DEBUG] Loading user profile:",{sessionName:b,sessionEmail:c,userId:a.user.id});let d=await fetch("/api/user/profile",{credentials:"include"});if(d.ok){let a=await d.json();if(console.log("âœ… [DEBUG] Profile data received:",{hasProfile:!!a.profile,profileName:a.profile?.name,profileEmail:a.profile?.email}),M(a.profile),a.profile){let d=a.profile.name||b||"",e=a.profile.email||c||"";aB(d),aD(e),console.log("ðŸ“ [DEBUG] Setting formData:",{finalName:d,finalEmail:e,source:{name:a.profile.name?"database":b?"session":"empty",email:a.profile.email?"database":c?"session":"empty"}}),K(b=>({...b,name:d,email:e,age:a.profile.age?.toString()||b.age,occupation:a.profile.occupation||b.occupation,medicalCondition:a.profile.medical_condition||b.medicalCondition,monthlyFoodBudget:a.profile.monthly_food_budget?.toString()||b.monthlyFoodBudget,complaint:x&&F?decodeURIComponent(F):a.profile.complaint||b.complaint}))}else console.log("âš ï¸ [DEBUG] No profile data, using session:",{sessionName:b,sessionEmail:c}),aB(b),aD(c),K(a=>({...a,name:b||a.name||"",email:c||a.email||"",complaint:x&&F?decodeURIComponent(F):a.complaint}))}else{let a=await d.json().catch(()=>({}));console.error("âŒ [DEBUG] Profile fetch failed:",{status:d.status,error:a}),aB(b),aD(c),K(a=>({...a,name:b||a.name||"",email:c||a.email||"",complaint:x&&F?decodeURIComponent(F):a.complaint}))}aJ(T),V(T),aK||(aL(T[0].id),ax(T[0].price))}}catch(a){console.error("Error loading user data:",a)}if(x){if(D&&!y)try{let a=await fetch(`/api/event-types/${D}`,{credentials:"include"});if(a.ok){let b=await a.json();b.eventType?.price&&ax(b.eventType.price)}}catch(a){console.error("Error fetching event type:",a)}if(C){let a=!1;if(E)try{let b=await fetch("/api/user/session-requests",{credentials:"include"});if(b.ok){let c=await b.json(),d=c.requests?.find(a=>a.id===E);d?.dietitian?.name&&(az((0,B.formatDietitianName)(d.dietitian.name)),a=!0)}}catch(a){console.error("Error fetching from session requests:",a)}if(!a)try{let b=await fetch(`/api/user/dietitian/${C}`,{credentials:"include"});if(b.ok){let c=await b.json();c.dietitian?.name&&(az(c.dietitian.name),a=!0)}}catch(a){console.error("Error fetching dietitian:",a)}if(!a&&aE.length>0){let a=aE.find(a=>a.id===C);a&&az(a.name)}}}})()},[x,F,D,y,C,E,aE]);let a0=a=>{let[b,c]=a.split(":"),d=parseInt(b);return`${d%12||12}:${c}${d>=12?"pm":"am"}`},a1=async()=>{if(y)a2();else if(ak&&am&&Y&&aK){let a=null,b=null;try{let{data:{session:c},error:d}=await z.auth.getSession();if(d||!c?.user?.email)return void alert("Please ensure you are logged in to complete payment.");a=c.user.email,b=c.user.user_metadata?.name||c.user.user_metadata?.full_name||c.user.email?.split("@")[0]||"User"}catch(a){console.error("Error fetching session:",a),alert("Failed to verify authentication. Please try again.");return}if(!a)return void alert("Email is required for payment. Please ensure you are logged in and try again.");try{let c=await fetch("/api/bookings",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({dietitianId:Y,eventTypeId:aK||D,startTime:new Date(`${(0,A.default)(ak).format("YYYY-MM-DD")}T${am}`).toISOString(),name:b,email:a,notes:J.complaint,userAge:J.age?parseInt(J.age):null,userOccupation:J.occupation||null,userMedicalCondition:J.medicalCondition||null,userMonthlyFoodBudget:J.monthlyFoodBudget?parseFloat(J.monthlyFoodBudget):null,userComplaint:J.complaint||null,sessionRequestId:E})});if(c.ok){let a=await c.json(),b=a.booking?.id||`booking-${Date.now()}`;ap({id:b,date:ak,time:am,dietician:aE.find(a=>a.id===Y)?.name||"",duration:`${aI.find(a=>a.id===aK)?.length||45}m`,meetingLink:""});try{let a=await fetch("/api/paystack/initialize",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({bookingId:b,amount:100*aw,metadata:{requestId:E||"",requestType:"CONSULTATION",description:`Consultation with ${aE.find(a=>a.id===Y)?.name||"Dietitian"}`}})});if(a.ok){let b=await a.json();if(b.authorization_url)window.location.href=b.authorization_url;else throw Error("No payment URL received")}else{let b=await a.json().catch(()=>({}));throw Error(b.error||"Failed to initialize payment")}}catch(a){console.error("Payment initialization error:",a),alert(a instanceof Error?a.message:"Failed to initialize payment. Please try again.")}}else{let a=await c.json().catch(()=>({}));console.error("Failed to create booking:",a),alert("Failed to create booking. Please try again.")}}catch(a){console.error("Error creating booking:",a),alert("Error creating booking. Please try again.")}}else alert("Please select date, time, and dietitian before proceeding.")},a2=async()=>{if(ak&&am&&Y&&E)try{if((await fetch(`/api/user/reschedule-booking/${E}`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({newDate:ak.toISOString(),newTime:am})})).ok){let a=aE.find(a=>a.id===Y);ap({date:ak,time:am,dietician:a?.name||"",duration:"45m",meetingLink:"https://meet.google.com/abc-defg-hij",isReschedule:!0}),I(7)}}catch(a){console.error("Error confirming reschedule:",a)}},a3=async a=>{if(ar(!1),av(a),ak&&am&&Y){let b=J.email||L?.email||P,c=J.name||L?.name||R;if(!b||!c)return void alert("Email and name are required. Please ensure your profile is complete.");try{let d=await fetch("/api/bookings",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({dietitianId:Y,eventTypeId:aK||D,startTime:new Date(`${(0,A.default)(ak).format("YYYY-MM-DD")}T${am}`).toISOString(),name:c,email:b,notes:J.complaint,userAge:J.age?parseInt(J.age):null,userOccupation:J.occupation||null,userMedicalCondition:J.medicalCondition||null,userMonthlyFoodBudget:J.monthlyFoodBudget?parseFloat(J.monthlyFoodBudget):null,userComplaint:J.complaint||null,sessionRequestId:E,paymentData:a})});if(d.ok){let a=aE.find(a=>a.id===Y),b=aI.find(a=>a.id===aK),c=await d.json();ap({id:c.booking?.id||`booking-${Date.now()}`,date:ak,time:am,dietician:a?.name||"",duration:`${b?.length||45}m`,meetingLink:c.booking?.meeting_link||""}),I(7);try{let a=await fetch("/api/user/profile",{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({age:J.age?parseInt(J.age):null,occupation:J.occupation||null,medical_condition:J.medicalCondition||null,monthly_food_budget:J.monthlyFoodBudget?parseFloat(J.monthlyFoodBudget):null})});a.ok||console.error("Failed to save profile:",await a.text())}catch(a){console.error("Error saving profile:",a)}E&&console.log(`Session request ${E} approved and booking created`)}}catch(a){console.error("Error creating booking:",a)}}};return(0,b.jsxs)("div",{className:"min-h-screen bg-[#0a0a0a] flex flex-col lg:flex-row",children:[(0,b.jsx)("div",{className:"lg:hidden",children:(0,b.jsx)(g.UserMobileHeader,{})}),(0,b.jsx)(f.UserDashboardSidebar,{}),(0,b.jsx)("main",{className:"flex-1 bg-[#101010] overflow-y-auto w-full lg:w-auto lg:ml-64 lg:rounded-tl-lg flex items-center justify-center p-4 lg:p-8 pb-20 lg:pb-8 pt-14 lg:pt-8",children:(0,b.jsxs)("div",{className:"w-full max-w-7xl bg-[#171717] border border-[#262626] rounded-lg shadow-xl",children:[H<7&&(0,b.jsx)("div",{className:"border-b border-[#262626] px-4 sm:px-8 py-3 sm:py-4",children:(0,b.jsx)("div",{className:"flex items-center gap-1 sm:gap-2 overflow-x-auto",children:[1,2,3].map(a=>{if(2===a&&x&&C&&!y)return null;let c=H>=3,d=H>=2||2===a&&x&&C,e=H>=1;return(0,b.jsxs)("div",{className:"flex items-center flex-shrink-0",children:[(0,b.jsx)("div",{className:`w-6 h-6 sm:w-8 sm:h-8 rounded-full flex items-center justify-center text-xs sm:text-sm font-medium ${1===a&&e||2===a&&d||3===a&&c?"bg-white text-black":"bg-[#262626] text-[#9ca3af]"}`,children:a}),a<3&&(0,b.jsx)("div",{className:`w-4 sm:w-8 md:w-12 h-0.5 ${1===a&&d||2===a&&c?"bg-white":"bg-[#262626]"}`})]},a)})})}),1===H&&(0,b.jsx)("div",{className:"flex justify-center p-4 md:p-8",children:(0,b.jsxs)("div",{className:"w-full max-w-5xl grid grid-cols-1 md:grid-cols-2 divide-y md:divide-y-0 md:divide-x divide-[#262626]",children:[(0,b.jsxs)("div",{className:"p-4 md:p-8 space-y-6",children:[(0,b.jsx)("div",{className:"flex items-center gap-2 mb-4",children:(0,b.jsx)(e.default,{src:"/daiyet logo.svg",alt:"Daiyet",width:100,height:30,className:"h-6 w-auto"})}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-4 relative",children:[(0,b.jsx)("h2",{className:"text-2xl font-semibold text-[#f9fafb] leading-tight flex-1 truncate",children:aK&&aI.find(a=>a.id===aK)?.title||U[0]?.title||"1-on-1 Consultation with Licensed Dietician"}),U.length>0&&(0,b.jsxs)("div",{className:"relative event-type-dropdown flex-shrink-0",children:[(0,b.jsx)("button",{type:"button",onClick:()=>X(!W),className:"w-8 h-8 rounded-full bg-[#FFF4E0] flex items-center justify-center hover:bg-[#ffe9c2] transition-colors",children:(0,b.jsx)(v.ChevronDown,{className:`h-4 w-4 text-black transition-transform ${W?"rotate-180":""}`})}),W&&(0,b.jsx)("div",{className:"absolute top-full left-auto right-0 sm:right-auto sm:left-0 mt-2 bg-[#171717] border border-[#262626] rounded-lg shadow-xl z-50 min-w-[280px] max-w-[calc(100vw-2rem)] sm:max-w-[350px] max-h-[50vh] overflow-y-auto",children:U.map(a=>{let c=aK===a.id;return(0,b.jsxs)("button",{type:"button",onClick:()=>{aL(a.id),ax(a.price),X(!1)},className:`w-full text-left px-4 py-3 text-sm transition-colors ${c?"bg-[#404040] text-[#f9fafb] font-medium":"text-[#f9fafb] hover:bg-[#262626]"}`,children:[(0,b.jsx)("div",{className:"font-medium truncate",children:a.title}),(0,b.jsxs)("div",{className:"text-xs text-[#9ca3af] mt-1",children:[a.length,"m â€¢ â‚¦",a.price.toLocaleString()]})]},a.id)})})]})]}),(0,b.jsx)("p",{className:"text-sm text-[#9ca3af] leading-relaxed mb-6",children:aK&&U.find(a=>a.id===aK)?.description||U[0]?.description||"Have one on one consultation with Licensed Dietitician [Nutritional counseling and treatment plan]"})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-2 sm:gap-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(r.Clock,{className:"h-4 w-4 sm:h-5 sm:w-5 text-[#9ca3af]"}),(0,b.jsxs)("span",{className:"text-xs sm:text-sm text-[#f9fafb]",children:[aK&&aI.find(a=>a.id===aK)?.length||U[0]?.length||45,"m"]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(s.Video,{className:"h-4 w-4 sm:h-5 sm:w-5 text-[#9ca3af]"}),(0,b.jsx)("span",{className:"text-xs sm:text-sm text-[#f9fafb]",children:"Google Meet"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(q.Calendar,{className:"h-4 w-4 sm:h-5 sm:w-5 text-[#9ca3af]"}),(0,b.jsxs)("div",{className:"flex items-center gap-1 sm:gap-2",children:[(0,b.jsx)("span",{className:"text-xs sm:text-sm text-[#f9fafb]",children:"Africa/Lagos"}),(0,b.jsx)(o.ChevronRight,{className:"h-3 w-3 sm:h-4 sm:w-4 text-[#9ca3af]"})]})]})]}),(aK||U.length>0)&&(0,b.jsx)("div",{className:"bg-white rounded-lg px-2 py-1 sm:px-3 sm:py-1.5 mt-3 w-fit",children:(0,b.jsx)("span",{className:"text-base sm:text-lg font-semibold text-black",children:0===aw?"Free":`â‚¦${aw.toLocaleString()}`})})]})]}),(0,b.jsx)("div",{className:"p-4 md:p-8",children:(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-lg font-semibold text-[#f9fafb] mb-6",children:"Enter your information"}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-[#D4D4D4] mb-2",children:["Age ",(0,b.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,b.jsx)(j.Input,{type:"number",value:J.age,onChange:a=>{K({...J,age:a.target.value}),ag.age&&ah(a=>{let b={...a};return delete b.age,b})},className:`bg-[#0a0a0a] border-[#262626] text-[#f9fafb] ${ag.age?"border-red-500":""}`,placeholder:"Enter your age",min:"18",max:"120",required:!0}),ag.age&&(0,b.jsx)("p",{className:"text-xs text-red-400 mt-1",children:ag.age})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-[#D4D4D4] mb-2",children:["Occupation ",(0,b.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,b.jsx)(j.Input,{type:"text",value:J.occupation,onChange:a=>{K({...J,occupation:a.target.value}),ag.occupation&&ah(a=>{let b={...a};return delete b.occupation,b})},className:`bg-[#0a0a0a] border-[#262626] text-[#f9fafb] ${ag.occupation?"border-red-500":""}`,placeholder:"Enter your occupation",required:!0}),ag.occupation&&(0,b.jsx)("p",{className:"text-xs text-red-400 mt-1",children:ag.occupation})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-[#D4D4D4] mb-2",children:["Medical Condition ",(0,b.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,b.jsx)(k.Textarea,{value:J.medicalCondition,onChange:a=>{K({...J,medicalCondition:a.target.value}),ag.medicalCondition&&ah(a=>{let b={...a};return delete b.medicalCondition,b})},rows:3,className:`bg-[#0a0a0a] border-[#262626] text-[#f9fafb] ${ag.medicalCondition?"border-red-500":""}`,placeholder:"Any medical conditions or health concerns...",required:!0}),ag.medicalCondition&&(0,b.jsx)("p",{className:"text-xs text-red-400 mt-1",children:ag.medicalCondition})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-[#D4D4D4] mb-2",children:["Monthly Food Budget (NGN) ",(0,b.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,b.jsx)(j.Input,{type:"number",value:J.monthlyFoodBudget,onChange:a=>{K({...J,monthlyFoodBudget:a.target.value}),ag.monthlyFoodBudget&&ah(a=>{let b={...a};return delete b.monthlyFoodBudget,b})},className:`bg-[#0a0a0a] border-[#262626] text-[#f9fafb] ${ag.monthlyFoodBudget?"border-red-500":""}`,placeholder:"Enter your monthly food budget",min:"0",step:"1000",required:!0}),ag.monthlyFoodBudget&&(0,b.jsx)("p",{className:"text-xs text-red-400 mt-1",children:ag.monthlyFoodBudget})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-[#D4D4D4] mb-2",children:["Additional Notes ",(0,b.jsx)("span",{className:"text-[#6b7280]",children:"(Optional)"})]}),(0,b.jsx)(k.Textarea,{value:J.complaint,onChange:a=>{K({...J,complaint:a.target.value})},rows:4,className:"bg-[#0a0a0a] border-[#262626] text-[#f9fafb]",placeholder:"Tell us about your concerns, goals, or any special requirements..."}),ag.complaint&&(0,b.jsx)("p",{className:"text-xs text-red-400 mt-1",children:ag.complaint})]})]}),(0,b.jsx)("div",{className:"flex gap-3 mt-6",children:(0,b.jsx)(i.Button,{onClick:()=>{let a=(()=>{let a={};if(J.age&&""!==J.age.trim()){let b=parseInt(J.age);isNaN(b)?a.age="Age must be a valid number":b<18&&(a.age="Age must be at least 18")}else a.age="Age is required";if(J.occupation&&""!==J.occupation.trim()||(a.occupation="Occupation is required"),J.medicalCondition&&""!==J.medicalCondition.trim()||(a.medicalCondition="Medical condition is required"),J.monthlyFoodBudget&&""!==J.monthlyFoodBudget.trim()){let b=parseFloat(J.monthlyFoodBudget);(isNaN(b)||b<0)&&(a.monthlyFoodBudget="Monthly food budget must be a valid positive number")}else a.monthlyFoodBudget="Monthly food budget is required";return a})();Object.keys(a).length>0?ah(a):(ah({}),x&&C?I(3):I(2))},className:"bg-[#FFF4E0] hover:bg-[#ffe9c2] text-black px-6 py-2",children:"Continue"})})]})})]})}),2===H&&!(x&&C)&&(0,b.jsx)("div",{className:"flex justify-center p-4 md:p-8",children:(0,b.jsxs)("div",{className:"w-full max-w-5xl grid grid-cols-1 md:grid-cols-2 divide-y md:divide-y-0 md:divide-x divide-[#262626]",children:[(0,b.jsxs)("div",{className:"p-4 md:p-8 space-y-6",children:[(0,b.jsx)("div",{className:"flex items-center gap-2 mb-4",children:(0,b.jsx)(e.default,{src:"/daiyet logo.svg",alt:"Daiyet",width:100,height:30,className:"h-6 w-auto"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-2xl font-semibold text-[#f9fafb] mb-4 line-clamp-2",children:aK&&aI.find(a=>a.id===aK)?.title||U[0]?.title||"1-on-1 Consultation with Licensed Dietician"}),(0,b.jsx)("p",{className:"text-sm text-[#9ca3af] leading-relaxed mb-6",children:aK&&U.find(a=>a.id===aK)?.description||U[0]?.description||"Have one on one consultation with Licensed Dietitician [Nutritional counseling and treatment plan]"})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(r.Clock,{className:"h-5 w-5 text-[#9ca3af]"}),(0,b.jsxs)("span",{className:"text-sm text-[#f9fafb]",children:[aK&&aI.find(a=>a.id===aK)?.length||U[0]?.length||45,"m"]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(s.Video,{className:"h-5 w-5 text-[#9ca3af]"}),(0,b.jsx)("span",{className:"text-sm text-[#f9fafb]",children:"Google Meet"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(q.Calendar,{className:"h-5 w-5 text-[#9ca3af]"}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:"text-sm text-[#f9fafb]",children:"Africa/Lagos"}),(0,b.jsx)(o.ChevronRight,{className:"h-4 w-4 text-[#9ca3af]"})]})]})]})]}),(0,b.jsx)("div",{className:"p-4 md:p-8",children:(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-lg font-semibold text-[#f9fafb] mb-6",children:"Select Dietician"}),aG?null:0===aE.length?(0,b.jsx)("div",{className:"text-center py-8",children:(0,b.jsx)("div",{className:"text-[#9ca3af]",children:"No dietitians available"})}):(0,b.jsx)("div",{className:"space-y-4",children:aE.map(a=>{let c=Y===a.id,d=x&&y;return(0,b.jsx)("div",{className:`border rounded-lg p-4 transition-all ${d?"opacity-50 cursor-not-allowed border-[#262626] bg-transparent":c?"border-white bg-[#171717] ring-1 ring-white/30 cursor-pointer":"border-[#262626] bg-transparent hover:bg-[#171717] cursor-pointer"}`,onClick:()=>!d&&Z(a.id),children:(0,b.jsxs)("div",{className:"flex items-start gap-4",children:[(0,b.jsx)("div",{className:"flex-shrink-0",children:(0,b.jsx)("div",{className:"w-16 h-16 rounded-full overflow-hidden bg-[#262626]",children:a.profileImage?(0,b.jsx)(e.default,{src:a.profileImage,alt:a.name,width:64,height:64,className:"w-full h-full object-cover grayscale"}):(0,b.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,b.jsx)("span",{className:"text-white text-lg font-semibold",children:a.name.charAt(0)})})})}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("h3",{className:"text-sm font-medium text-[#f9fafb] mb-1",children:a.name}),c&&(0,b.jsxs)("div",{className:"flex items-center gap-1 text-xs text-white bg-[#2b2b2b] px-2 py-1 rounded-full",children:[(0,b.jsx)(p.Check,{className:"h-3 w-3"}),"Selected"]})]}),(0,b.jsx)("p",{className:"text-xs text-[#9ca3af]",children:a.qualification})]}),(0,b.jsx)(i.Button,{variant:"outline",className:"bg-transparent border-[#262626] text-[#f9fafb] hover:bg-[#171717] px-3 py-1 text-xs flex-shrink-0",onClick:async b=>{b.stopPropagation(),_(a);let c=ae.get(a.id);if(c)ab(c),ad(!1),console.log("âš¡ Using preloaded profile:",c);else{ad(!0);try{let b=await fetch(`/api/dietitians/${a.id}`,{credentials:"include"});if(b.ok){let c=await b.json(),d={id:c.profile.id,name:c.profile.name,email:c.profile.email,bio:c.profile.bio,image:c.profile.image,specialization:c.profile.specialization,licenseNumber:c.profile.licenseNumber,experience:c.profile.experience,location:c.profile.location,qualifications:c.profile.qualifications||[],updatedAt:c.profile.updatedAt};ab(d),af(b=>{let c=new Map(b);return c.set(a.id,d),c}),console.log("âœ… Loaded and cached full profile:",d)}else{let a=await b.json().catch(()=>({}));console.error("Failed to load full profile:",a)}}catch(a){console.error("Failed to load full profile:",a)}finally{ad(!1)}}},children:"View Profile"})]})},a.id)})}),(0,b.jsx)("div",{className:"flex gap-3 mt-6",children:x&&C?null:(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(i.Button,{onClick:()=>I(1),variant:"outline",className:"bg-transparent border-[#262626] text-[#f9fafb] hover:bg-[#171717] px-6 py-2",children:"Back"}),(0,b.jsx)(i.Button,{onClick:()=>I(3),disabled:!Y,className:"bg-white hover:bg-gray-100 text-black px-6 py-2 disabled:opacity-50",children:"Continue"})]})})]})})]})}),3===H&&(0,b.jsx)("div",{className:"flex justify-center p-4 md:p-8",children:(0,b.jsx)("div",{className:"w-full max-w-md mx-auto",children:(0,b.jsx)("div",{className:"p-4 md:p-8",children:(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsx)("button",{onClick:()=>{let a=(0,A.default)(ai).subtract(1,"month");aj(a),Y&&aK&&a.format("YYYY-MM")},className:"text-[#D4D4D4] hover:text-[#f9fafb]",children:(0,b.jsx)(n.ChevronLeft,{className:"h-5 w-5"})}),(0,b.jsx)("h3",{className:"text-sm font-medium text-[#f9fafb]",children:ai.format("MMMM YYYY")}),(0,b.jsx)("button",{onClick:()=>{let a=(0,A.default)(ai).add(1,"month");aj(a),Y&&aK&&a.format("YYYY-MM")},className:"text-[#D4D4D4] hover:text-[#f9fafb]",children:(0,b.jsx)(o.ChevronRight,{className:"h-5 w-5"})})]}),(0,b.jsx)("div",{className:"grid grid-cols-7 gap-1 mb-2",children:["SUN","MON","TUE","WED","THU","FRI","SAT"].map(a=>(0,b.jsx)("div",{className:"text-xs text-[#9ca3af] text-center py-2",children:a},a))}),aQ?(0,b.jsx)("div",{className:"grid grid-cols-7 gap-1",children:Array.from({length:35}).map((a,c)=>(0,b.jsx)("div",{className:"h-10 rounded bg-[#262626] animate-pulse"},`skeleton-${c}`))}):(0,b.jsxs)("div",{className:"grid grid-cols-7 gap-1",children:[Array.from({length:a$}).map((a,c)=>(0,b.jsx)("div",{className:"h-10"},`empty-${c}`)),Array.from({length:aZ}).map((a,c)=>{let d,e=c+1,f=(d=ai.date(e).format("D"),aS.includes(d)),g=!!ak&&(0,A.default)(ak).isSame(ai.date(e),"day"),h=(0,A.default)().isSame(ai.date(e),"day");return(0,b.jsx)("button",{onClick:()=>{let a;al(a=ai.date(e).toDate()),an(""),Y&&aK&&(0,A.default)(a).format("YYYY-MM"),Y&&a_(a)},className:`h-10 rounded text-sm transition-colors ${g?"bg-white text-black font-medium":f?"bg-[#262626] text-[#f9fafb] hover:bg-[#404040]":"text-[#9ca3af] opacity-50 cursor-not-allowed"} ${h&&!g?"ring-1 ring-[#404040]":""}`,disabled:!f,children:e},e)})]}),(0,b.jsx)("div",{className:"mt-4 text-center",children:(0,b.jsx)("span",{className:"text-xs text-[#9ca3af]",children:"Cal.com"})}),(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 mt-6",children:[(0,b.jsx)(i.Button,{onClick:()=>{x&&C?I(1):I(2)},variant:"outline",className:"w-full sm:w-auto bg-transparent border-[#262626] text-[#f9fafb] hover:bg-[#171717] px-6 py-2",children:"Back"}),(0,b.jsx)(i.Button,{onClick:()=>I(4),disabled:!ak,className:"w-full sm:w-auto bg-white hover:bg-gray-100 text-black px-6 py-2 disabled:opacity-50",children:"Continue"})]})]})})})}),4===H&&(0,b.jsx)("div",{className:"flex justify-center p-4 md:p-8",children:(0,b.jsx)("div",{className:"w-full max-w-md mx-auto",children:(0,b.jsxs)("div",{className:"p-4 md:p-8",children:[(0,b.jsxs)("div",{className:"mb-6",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold text-[#f9fafb] mb-2",children:"Select Time"}),ak&&(0,b.jsx)("p",{className:"text-sm text-[#9ca3af]",children:(0,A.default)(ak).format("dddd, MMMM D, YYYY")})]}),(0,b.jsxs)("div",{className:"flex items-center justify-end gap-2 mb-4",children:[(0,b.jsx)("button",{className:"text-xs px-3 py-1.5 bg-white text-black rounded font-medium",children:"12h"}),(0,b.jsx)("button",{className:"text-xs px-3 py-1.5 bg-transparent text-[#9ca3af] rounded border border-[#262626]",children:"24h"})]}),(0,b.jsx)("div",{className:"space-y-2 max-h-[400px] overflow-y-auto mb-6",children:aO?(0,b.jsx)("div",{className:"space-y-2",children:Array.from({length:6}).map((a,c)=>(0,b.jsx)("div",{className:"w-full h-12 rounded bg-[#262626] animate-pulse"},`timeslot-skeleton-${c}`))}):0===aM.length?(0,b.jsx)("div",{className:"text-center py-8 text-sm text-[#9ca3af]",children:"No available times for this date"}):aM.map(a=>{let c=am===a;return(0,b.jsxs)("button",{onClick:()=>{an(a)},className:`w-full h-12 rounded text-sm flex items-center gap-2 px-4 transition-colors ${c?"bg-white text-black font-medium":"bg-transparent border border-[#262626] text-[#f9fafb] hover:bg-[#171717]"}`,children:[(0,b.jsx)("div",{className:`w-2 h-2 rounded-full ${c?"bg-black":"bg-green-500"}`}),a0(a)]},a)})}),(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[(0,b.jsx)(i.Button,{onClick:()=>I(3),variant:"outline",className:"w-full sm:w-auto bg-transparent border-[#262626] text-[#f9fafb] hover:bg-[#171717] px-6 py-2",children:"Back"}),(0,b.jsx)(i.Button,{onClick:()=>I(5),disabled:!am,className:"w-full sm:w-auto bg-white hover:bg-gray-100 text-black px-6 py-2 disabled:opacity-50",children:"Continue"})]})]})})}),5===H&&(0,b.jsx)("div",{className:"flex justify-center p-4 md:p-8",children:(0,b.jsx)("div",{className:"w-full max-w-2xl",children:(0,b.jsxs)("div",{className:"p-4 md:p-8",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold text-[#f9fafb] mb-6",children:"Order Summary"}),(0,b.jsxs)("div",{className:"border border-[#262626] rounded-lg p-6 space-y-3 mb-6",children:[(0,b.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,b.jsx)("span",{className:"text-[#9ca3af]",children:"Dietician"}),(0,b.jsx)("span",{className:"text-[#f9fafb]",children:ay||aE.find(a=>a.id===Y)?.name||"Not selected"})]}),(0,b.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,b.jsx)("span",{className:"text-[#9ca3af]",children:"Date"}),(0,b.jsx)("span",{className:"text-[#f9fafb]",children:ak?(0,A.default)(ak).format("MMM D, YYYY"):""})]}),(0,b.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,b.jsx)("span",{className:"text-[#9ca3af]",children:"Time"}),(0,b.jsx)("span",{className:"text-[#f9fafb]",children:a0(am)})]}),(0,b.jsxs)("div",{className:"flex justify-between text-sm gap-2",children:[(0,b.jsx)("span",{className:"text-[#9ca3af] flex-shrink-0",children:"Service Type"}),(0,b.jsx)("span",{className:"text-[#f9fafb] truncate text-right",children:aI.find(a=>a.id===aK)?.title||"Not selected"})]}),(0,b.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,b.jsx)("span",{className:"text-[#9ca3af]",children:"Duration"}),(0,b.jsxs)("span",{className:"text-[#f9fafb]",children:[aI.find(a=>a.id===aK)?.length||45," minutes"]})]}),J.age&&(0,b.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,b.jsx)("span",{className:"text-[#9ca3af]",children:"Age"}),(0,b.jsx)("span",{className:"text-[#f9fafb]",children:J.age})]}),J.occupation&&(0,b.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,b.jsx)("span",{className:"text-[#9ca3af]",children:"Occupation"}),(0,b.jsx)("span",{className:"text-[#f9fafb]",children:J.occupation})]}),(0,b.jsx)("div",{className:"border-t border-[#262626] pt-3 mt-3",children:(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-sm font-medium text-[#f9fafb]",children:"Total"}),(0,b.jsxs)("span",{className:"text-lg font-semibold text-[#f9fafb]",children:["â‚¦",aw.toLocaleString()]})]})})]}),(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[(0,b.jsx)(i.Button,{onClick:()=>I(4),variant:"outline",className:"w-full sm:w-auto bg-transparent border-[#262626] text-[#f9fafb] hover:bg-[#171717] px-6 py-2",children:"Back"}),(0,b.jsx)(i.Button,{onClick:a1,className:"w-full sm:w-auto bg-white hover:bg-gray-100 text-black px-6 py-2",children:y?"Confirm Reschedule":"Proceed to Payment"})]})]})})}),7===H&&ao&&(0,b.jsxs)("div",{className:"p-8 text-center",children:[(0,b.jsx)("div",{className:"w-16 h-16 bg-green-500 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,b.jsx)(p.Check,{className:"h-8 w-8 text-white"})}),(0,b.jsx)("h2",{className:"text-2xl font-semibold text-[#f9fafb] mb-2",children:"Booking Confirmed!"}),(0,b.jsx)("p",{className:"text-sm text-[#9ca3af] mb-6",children:"Your booking has been confirmed"}),(0,b.jsxs)("div",{className:"border border-[#262626] rounded-lg p-6 space-y-4 text-left max-w-md mx-auto",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(q.Calendar,{className:"h-5 w-5 text-[#9ca3af]"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-xs text-[#9ca3af]",children:"Date"}),(0,b.jsx)("div",{className:"text-sm text-[#f9fafb]",children:(0,A.default)(ao.date).format("MMM D, YYYY")})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(r.Clock,{className:"h-5 w-5 text-[#9ca3af]"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-xs text-[#9ca3af]",children:"Time"}),(0,b.jsx)("div",{className:"text-sm text-[#f9fafb]",children:a0(ao.time)})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(r.Clock,{className:"h-5 w-5 text-[#9ca3af]"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-xs text-[#9ca3af]",children:"Duration"}),(0,b.jsx)("div",{className:"text-sm text-[#f9fafb]",children:ao.duration})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(s.Video,{className:"h-5 w-5 text-[#9ca3af]"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-xs text-[#9ca3af]",children:"Meeting Link"}),(0,b.jsxs)("a",{href:ao.meetingLink,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-400 hover:underline flex items-center gap-1",children:[ao.meetingLink,(0,b.jsx)(t.ExternalLink,{className:"h-3 w-3"})]})]})]})]}),(0,b.jsxs)("div",{className:"space-y-3 mt-6 max-w-md mx-auto",children:[(0,b.jsx)(i.Button,{onClick:()=>window.open(ao.meetingLink,"_blank"),className:"w-full bg-white hover:bg-gray-100 text-black px-6 py-2",children:"Join Meeting"}),(0,b.jsx)("div",{className:"text-sm text-[#9ca3af] mb-2",children:"Add to Calendar"}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(i.Button,{variant:"outline",className:"flex-1 bg-transparent border-[#262626] text-[#f9fafb] hover:bg-[#171717] px-4 py-2 text-xs",children:"Google Calendar"}),(0,b.jsx)(i.Button,{variant:"outline",className:"flex-1 bg-transparent border-[#262626] text-[#f9fafb] hover:bg-[#171717] px-4 py-2 text-xs",children:"Outlook"}),(0,b.jsx)(i.Button,{variant:"outline",className:"flex-1 bg-transparent border-[#262626] text-[#f9fafb] hover:bg-[#171717] px-4 py-2 text-xs",children:"iCal"})]}),(0,b.jsx)(i.Button,{onClick:()=>{I(1),al(null),an(""),Z(""),ap(null)},variant:"outline",className:"w-full bg-transparent border-[#262626] text-[#f9fafb] hover:bg-[#171717] px-6 py-2",children:"Book Another Session"})]})]})]})}),!y&&(0,b.jsx)(l.PaymentModal,{isOpen:aq,onClose:()=>{ar(!1),I(5)},onSuccess:a3,amount:aw,currency:"NGN",description:Y&&aE.find(a=>a.id===Y)?`Consultation with ${aE.find(a=>a.id===Y)?.name}`:"Consultation Booking",requestType:"CONSULTATION",requestId:E||void 0,bookingId:ao?.id||void 0,userEmail:J.email||L?.email||P||"",userName:J.name||L?.name||R||""}),(0,b.jsx)(m.PaymentSuccessModal,{isOpen:as,onClose:()=>{at(!1),w.push("/user-dashboard/upcoming-meetings")},requestType:"CONSULTATION",amount:au?.amount||aw||15e3,currency:au?.currency||"NGN",bookingDetails:ao,onViewDetails:()=>{at(!1),w.push("/user-dashboard/upcoming-meetings")}}),$&&(0,b.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:(0,b.jsxs)("div",{className:"bg-[#171717] border border-[#262626] rounded-lg w-full max-w-2xl p-6 shadow-lg",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold text-[#f9fafb]",children:"Dietician Profile"}),(0,b.jsx)("button",{onClick:()=>_(null),className:"text-[#D4D4D4] hover:text-[#f9fafb] transition-colors",children:(0,b.jsx)(u.X,{className:"h-5 w-5"})})]}),(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)("div",{className:"flex justify-center",children:(0,b.jsx)("div",{className:"w-32 h-32 rounded-full overflow-hidden bg-[#262626]",children:$.profileImage?(0,b.jsx)(e.default,{src:$.profileImage,alt:$.name,width:128,height:128,className:"w-full h-full object-cover grayscale"}):(0,b.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,b.jsx)("span",{className:"text-white text-3xl font-semibold",children:$.name.charAt(0)})})})}),(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("h3",{className:"text-xl font-semibold text-[#f9fafb] mb-2",children:$.name}),(0,b.jsx)("p",{className:"text-sm text-[#9ca3af]",children:$.qualification})]}),(0,b.jsxs)("div",{className:"border-t border-[#262626] pt-6",children:[(0,b.jsx)("h4",{className:"text-sm font-medium text-[#D4D4D4] mb-3",children:"Professional Summary"}),ac?(0,b.jsx)("p",{className:"text-sm text-[#9ca3af]",children:"Loading..."}):(0,b.jsx)("p",{className:"text-sm text-[#9ca3af] leading-relaxed whitespace-pre-line",children:aa?.bio||$.description||"No professional summary available."}),aa?.updatedAt&&!ac&&(0,b.jsxs)("div",{className:"text-xs text-[#9ca3af] pt-3 mt-3 border-t border-[#262626]",children:["Profile updated: ",new Date(aa.updatedAt).toLocaleString()]})]}),(0,b.jsx)("div",{className:"flex justify-end pt-4 border-t border-[#262626]",children:(0,b.jsx)(i.Button,{onClick:()=>_(null),className:"bg-white hover:bg-gray-100 text-black px-6 py-2",children:"Close"})})]})]})}),(0,b.jsx)("div",{className:"lg:hidden",children:(0,b.jsx)(h.UserBottomNavigation,{})})]})}function D(){return(0,b.jsx)(c.Suspense,{fallback:(0,b.jsx)("div",{className:"min-h-screen bg-[#0a0a0a] flex items-center justify-center",children:(0,b.jsx)("div",{className:"text-white",children:"Loading booking page..."})}),children:(0,b.jsx)(C,{})})}a.s(["default",()=>D],27167)}];

//# sourceMappingURL=Desktop_daiyet-app_app_user-dashboard_book-a-call_page_tsx_7237640d._.js.map