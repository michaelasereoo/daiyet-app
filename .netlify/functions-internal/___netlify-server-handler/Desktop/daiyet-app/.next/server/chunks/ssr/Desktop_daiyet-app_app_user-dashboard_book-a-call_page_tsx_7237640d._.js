module.exports=[27167,a=>{"use strict";var b=a.i(28109),c=a.i(85007),d=a.i(82138),e=a.i(90470),f=a.i(92373),g=a.i(15715),h=a.i(34568),i=a.i(41164),j=a.i(31960),k=a.i(87804),l=a.i(11842),m=a.i(47417),n=a.i(92177),o=a.i(56775),p=a.i(85109),q=a.i(24929),r=a.i(35645),s=a.i(89973),t=a.i(11672),u=a.i(34006),v=a.i(58467),w=a.i(71678),x=a.i(36171),y=a.i(11258);function z(){let a=(0,d.useSearchParams)(),z=(0,d.useRouter)(),A="true"===a.get("prefill"),B="true"===a.get("reschedule"),C=a.get("dietitianId"),D=a.get("eventTypeId"),E=a.get("requestId"),F=a.get("message"),G=A&&C||B?3:1,[H,I]=(0,c.useState)(G),[J,K]=(0,c.useState)({name:"",email:"",age:"",occupation:"",medicalCondition:"",monthlyFoodBudget:"",complaint:""}),[L,M]=(0,c.useState)(null),[N,O]=(0,c.useState)(null),[P,Q]=(0,c.useState)(""),[R,S]=(0,c.useState)(""),T=[{id:"free-trial-consultation",title:"Free Trial Consultation",slug:"free-trial-consultation",description:"Get insights into why you need to see a dietician.",length:15,price:0,currency:"NGN"},{id:"1-on-1-consultation-with-licensed-dietician",title:"1-on-1 Consultation with Licensed Dietician",slug:"1-on-1-consultation-with-licensed-dietician",description:"Have one on one consultation with Licensed Dietitician [Nutritional counseling and treatment plan]",length:45,price:15e3,currency:"NGN"},{id:"monitoring",title:"Monitoring",slug:"monitoring",description:"Monitoring consultation",length:20,price:5e3,currency:"NGN"},{id:"test-event",title:"Test Event",slug:"test-event",description:"Test event for payment testing",length:15,price:100,currency:"NGN"}],U=T.filter(a=>"free-trial-consultation"===a.slug||"1-on-1-consultation-with-licensed-dietician"===a.slug||"test-event"===a.slug),[V,W]=(0,c.useState)(U),[X,Y]=(0,c.useState)(!1);(0,c.useEffect)(()=>{!aL&&U.length>0&&(aK(T),aM(U[0].id),ay(U[0].price))},[]);let[Z,$]=(0,c.useState)(C||""),[_,aa]=(0,c.useState)(null),[ab,ac]=(0,c.useState)(null),[ad,ae]=(0,c.useState)(!1),[af,ag]=(0,c.useState)(new Map),[ah,ai]=(0,c.useState)({}),[aj,ak]=(0,c.useState)((0,x.default)()),[al,am]=(0,c.useState)(null),[an,ao]=(0,c.useState)(""),[ap,aq]=(0,c.useState)(null),[ar,as]=(0,c.useState)(!1),[at,au]=(0,c.useState)(!1),[av,aw]=(0,c.useState)(null),[ax,ay]=(0,c.useState)(15e3),[az,aA]=(0,c.useState)(""),[aB,aC]=(0,c.useState)(""),[aD,aE]=(0,c.useState)(""),[aF,aG]=(0,c.useState)([]),[aH,aI]=(0,c.useState)(!0),[aJ,aK]=(0,c.useState)([]),[aL,aM]=(0,c.useState)(D||""),[aN,aO]=(0,c.useState)([]),[aP,aQ]=(0,c.useState)(!1),[aR,aS]=(0,c.useState)(()=>[]),aT=aJ.find(a=>a.id===aL),aU=aT?.length||45,{data:aV,isLoading:aW}=function({dietitianId:a,eventTypeId:b,startDate:d,endDate:e,durationMinutes:f=30,initialData:g,enabled:h=!0}){let[i,j]=(0,c.useState)(g),[k,l]=(0,c.useState)(!1),[m,n]=(0,c.useState)(null),o=(0,c.useRef)(null),p=(0,c.useRef)(0),q=(0,c.useRef)(0),r=(0,c.useRef)(!0),s=(0,c.useCallback)(()=>{let a=3e4*Math.pow(2,Math.min(q.current,5)),b=.3*Math.random()*a;return Math.min(a+b,3e5)},[]),t=(0,c.useCallback)(async()=>{if(!h||!a||!d||!e)return;let c=Date.now();if(!(c-p.current<1e4)){l(!0);try{let g=new URLSearchParams({dietitianId:a,startDate:d.toISOString().split("T")[0],endDate:e.toISOString().split("T")[0],duration:f.toString()});b&&g.append("eventTypeId",b);let h=await fetch(`/api/availability/timeslots?${g.toString()}`,{credentials:"include",headers:{"Cache-Control":"no-cache",Pragma:"no-cache"}});if(!h.ok)throw Error(`HTTP ${h.status}`);let i=await h.json();j(i),n(null),q.current=0,p.current=c}catch(a){q.current++,n(a instanceof Error?a.message:"Fetch failed")}finally{l(!1)}}},[a,b,d,e,f,h]);return(0,c.useEffect)(()=>{let a=()=>{r.current=!document.hidden,document.hidden||t()};return document.addEventListener("visibilitychange",a),()=>{document.removeEventListener("visibilitychange",a)}},[t]),(0,c.useEffect)(()=>{if(!h||!a||!r.current||!d||!e)return;let b=()=>{r.current&&t(),o.current&&clearTimeout(o.current),o.current=setTimeout(b,s())};return t(),o.current=setTimeout(b,s()),()=>{o.current&&clearTimeout(o.current)}},[a,b,d,e,h,t,s]),{data:i,isLoading:k,error:m,refetch:t}}({dietitianId:Z||"",eventTypeId:aL||void 0,startDate:al?new Date(al):void 0,endDate:al?(0,x.default)(al).add(1,"day").toDate():void 0,durationMinutes:aU,enabled:!!al&&!!Z&&!!aL});(0,c.useEffect)(()=>{aV&&al?(aO((aV.slots||[]).filter(a=>(0,x.default)(a.start).isSame((0,x.default)(al),"day")).map(a=>(0,x.default)(a.start).format("HH:mm"))),aQ(!1),Z&&aL&&(0,x.default)(al).format("YYYY-MM")):aW&&aQ(!0)},[aV,al,aW,Z,aL]);let aX=aj.startOf("month"),aY=aj.daysInMonth(),aZ=aX.day(),a$=async a=>{am(a)};(0,c.useEffect)(()=>{if(Z&&aL){let a=async()=>{try{let a=aj.startOf("month").format("YYYY-MM-DD"),b=aj.add(1,"month").endOf("month").format("YYYY-MM-DD"),c=aT?.length||45,d=`/api/availability/timeslots?dietitianId=${Z}&startDate=${a}&endDate=${b}&duration=${c}&eventTypeId=${aL}`;console.log("ðŸ“… [PRELOAD] Fetching availability for 2 months:",{startDate:a,endDate:b,dietitianId:Z,eventTypeId:aL,duration:c});let e=await fetch(d,{credentials:"include"});if(e.ok){let a=await e.json();console.log("âœ… [PRELOAD] Availability data received:",{slotsCount:a.slots?.length||0,timezone:a.timezone});let b=new Set((a.slots||[]).filter(a=>(0,x.default)(a.start).isSame(aj,"month")).map(a=>(0,x.default)(a.start).format("D")));aS(Array.from(b)),console.log("ðŸ“Š [PRELOAD] Available dates set:",Array.from(b))}else{let a=await e.json().catch(()=>({}));console.error("âŒ [PRELOAD] Fetch failed:",{status:e.status,error:a.error})}}catch(a){console.error("âŒ [PRELOAD] Error fetching available dates:",a)}};(async()=>{try{aj.format("YYYY-MM"),a()}catch(a){console.error("âŒ [INSTANT] Error in preload:",a)}})()}},[Z,aL,aT,aj]),(0,c.useEffect)(()=>{(async()=>{try{aI(!0);let a=await fetch("/api/dietitians",{credentials:"include"});if(a.ok){let b=((await a.json()).dietitians||[]).map(a=>({id:a.id,name:a.name,qualification:a.qualification||"Licensed Dietitian",profileImage:a.image||void 0,description:a.description||a.bio||"Professional nutritionist ready to help you achieve your health goals."}));aG(b),console.log("âœ… Fetched dietitians:",b.length);let c=b.map(async a=>{try{let b=await fetch(`/api/dietitians/${a.id}`,{credentials:"include"});if(b.ok){let c=await b.json(),d={id:c.profile.id,name:c.profile.name,email:c.profile.email,bio:c.profile.bio,image:c.profile.image,specialization:c.profile.specialization,licenseNumber:c.profile.licenseNumber,experience:c.profile.experience,location:c.profile.location,qualifications:c.profile.qualifications||[],updatedAt:c.profile.updatedAt};return{id:a.id,profile:d}}}catch(b){console.warn(`âš ï¸ Failed to preload profile for ${a.id}:`,b)}return null}),d=await Promise.all(c),e=new Map;d.forEach(a=>{a&&e.set(a.id,a.profile)}),ag(e),console.log(`âœ… Preloaded ${e.size} dietitian profiles`)}else{let b=await a.json().catch(()=>({}));console.error("Error fetching dietitians:",b)}}catch(a){console.error("Error fetching dietitians:",a)}finally{aI(!1)}})()},[]),(0,c.useEffect)(()=>{Z&&V.length>0&&(async()=>{try{let a=await fetch(`/api/event-types?dietitianId=${Z}`,{credentials:"include"});if(a.ok){let b=(await a.json()).eventTypes||[];W(a=>{let c=a.map(a=>{let c=b.find(b=>b.slug===a.slug);return c?{...a,id:c.id,description:c.description||a.description}:a});if(aL&&aL.length<36){let a=c.find(a=>a.slug===aL||a.id===aL);a&&a.id!==aL&&aM(a.id)}return c}),aK(b)}}catch(a){console.error("Error fetching real event types:",a)}})()},[Z]),(0,c.useEffect)(()=>{let a=J.name||L?.name||R||"",b=J.email||L?.email||P||"";aC(a),aE(b),console.log("ðŸ‘¤ [DEBUG] User name/email updated:",{formDataName:J.name,formDataEmail:J.email,userProfileName:L?.name,userProfileEmail:L?.email,sessionName:R,sessionEmail:P,finalName:a,finalEmail:b})},[J.name,J.email,L,R,P]),(0,c.useEffect)(()=>{5===H&&(async()=>{try{let{data:{session:a}}=await w.supabase.auth.getSession();a?.user?.email&&(console.log("ðŸ“§ [DEBUG] Ensuring email from authenticated session for order summary:",a.user.email),Q(a.user.email),aD||aE(a.user.email),J.email||K(b=>({...b,email:a.user.email||""})))}catch(a){console.error("Error fetching session email for order summary:",a)}})()},[H]),(0,c.useEffect)(()=>{try{let b=a.get("payment"),c=a.get("reference");if(!b)return;if("success"===b&&c)(async()=>{try{let a=await fetch("/api/payments/verify",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({reference:c})});if(a.ok){let b=(await a.json()).payment;if(b?.booking_id){let a=await fetch(`/api/bookings/${b.booking_id}`,{credentials:"include"});if(a.ok){let c=(await a.json()).booking;if(!c)return void console.error("Booking not found in response");let d="";aF.length>0&&(d=aF.find(a=>a.id===c.dietitian_id)?.name||"");let e="45m";if(aJ.length>0){let a=aJ.find(a=>a.id===c.event_type_id);e=`${a?.length||45}m`}let f=(0,x.default)(c.start_time);aq({id:c.id,date:f.toDate(),time:f.format("HH:mm"),dietician:d,duration:e,meetingLink:c.meeting_link||""}),aw({amount:b.amount||ax,currency:b.currency||"NGN"}),I(7),setTimeout(()=>{z.replace("/user-dashboard/book-a-call",{scroll:!1})},100)}else console.error("Failed to fetch booking:",await a.text())}}else console.error("Failed to verify payment:",await a.text())}catch(a){console.error("Error verifying payment:",a)}})();else if("error"===b){let b=a.get("message");console.error("Payment error:",b),setTimeout(()=>{z.replace("/user-dashboard/book-a-call",{scroll:!1})},100)}}catch(a){console.error("Error in payment callback handler:",a)}},[a,z]),(0,c.useEffect)(()=>{(async()=>{try{let{data:{session:a}}=await w.supabase.auth.getSession();if(a?.user){let b=a.user.user_metadata?.name||a.user.user_metadata?.full_name||"",c=a.user.email||"";S(b),Q(c),console.log("ðŸ‘¤ [DEBUG] Loading user profile:",{sessionName:b,sessionEmail:c,userId:a.user.id});let d=await fetch("/api/user/profile",{credentials:"include"});if(d.ok){let a=await d.json();if(console.log("âœ… [DEBUG] Profile data received:",{hasProfile:!!a.profile,profileName:a.profile?.name,profileEmail:a.profile?.email}),M(a.profile),a.profile){let d=a.profile.name||b||"",e=a.profile.email||c||"";aC(d),aE(e),console.log("ðŸ“ [DEBUG] Setting formData:",{finalName:d,finalEmail:e,source:{name:a.profile.name?"database":b?"session":"empty",email:a.profile.email?"database":c?"session":"empty"}}),K(b=>({...b,name:d,email:e,age:a.profile.age?.toString()||b.age,occupation:a.profile.occupation||b.occupation,medicalCondition:a.profile.medical_condition||b.medicalCondition,monthlyFoodBudget:a.profile.monthly_food_budget?.toString()||b.monthlyFoodBudget,complaint:A&&F?decodeURIComponent(F):a.profile.complaint||b.complaint}))}else console.log("âš ï¸ [DEBUG] No profile data, using session:",{sessionName:b,sessionEmail:c}),aC(b),aE(c),K(a=>({...a,name:b||a.name||"",email:c||a.email||"",complaint:A&&F?decodeURIComponent(F):a.complaint}))}else{let a=await d.json().catch(()=>({}));console.error("âŒ [DEBUG] Profile fetch failed:",{status:d.status,error:a}),aC(b),aE(c),K(a=>({...a,name:b||a.name||"",email:c||a.email||"",complaint:A&&F?decodeURIComponent(F):a.complaint}))}let e=await fetch("/api/user/booking-history",{credentials:"include"});if(e.ok){let a=await e.json();O(a);let b=a.bookedEventTypes||[],c=T;c=b.includes("free-trial-consultation")||b.includes("free-trial")?T.filter(a=>"1-on-1-consultation-with-licensed-dietician"===a.slug):b.includes("1-on-1-consultation-with-licensed-dietician")||b.includes("1-on-1")||b.includes("one-on-one")?T.filter(a=>"1-on-1-consultation-with-licensed-dietician"===a.slug||"monitoring"===a.slug):T.filter(a=>"free-trial-consultation"===a.slug||"1-on-1-consultation-with-licensed-dietician"===a.slug);let d=T.find(a=>"test-event"===a.slug);d&&!c.find(a=>"test-event"===a.slug)&&c.push(d),aK(T),W(c),c.length>0&&!aL&&(aM(c[0].id),ay(c[0].price))}else{let a=T.filter(a=>"free-trial-consultation"===a.slug||"1-on-1-consultation-with-licensed-dietician"===a.slug),b=T.find(a=>"test-event"===a.slug);b&&!a.find(a=>"test-event"===a.slug)&&a.push(b),aK(T),W(a),a.length>0&&!aL&&(aM(a[0].id),ay(a[0].price))}}}catch(a){console.error("Error loading user data:",a)}if(A){if(D&&!B)try{let a=await fetch(`/api/event-types/${D}`,{credentials:"include"});if(a.ok){let b=await a.json();b.eventType?.price&&ay(b.eventType.price)}}catch(a){console.error("Error fetching event type:",a)}if(C){let a=!1;if(E)try{let b=await fetch("/api/user/session-requests",{credentials:"include"});if(b.ok){let c=await b.json(),d=c.requests?.find(a=>a.id===E);d?.dietitian?.name&&(aA((0,y.formatDietitianName)(d.dietitian.name)),a=!0)}}catch(a){console.error("Error fetching from session requests:",a)}if(!a)try{let b=await fetch(`/api/user/dietitian/${C}`,{credentials:"include"});if(b.ok){let c=await b.json();c.dietitian?.name&&(aA(c.dietitian.name),a=!0)}}catch(a){console.error("Error fetching dietitian:",a)}if(!a&&aF.length>0){let a=aF.find(a=>a.id===C);a&&aA(a.name)}}}})()},[A,F,D,B,C,E,aF]);let a_=a=>{let[b,c]=a.split(":"),d=parseInt(b);return`${d%12||12}:${c}${d>=12?"pm":"am"}`},a0=async()=>{if(B)a1();else if(al&&an&&Z&&aL){let a=J.email||L?.email||P,b=J.name||L?.name||R;if(!a)return void alert("Email is required for payment. Please enter your email address.");if(!b)return void alert("Name is required for payment. Please enter your name.");try{let c=await fetch("/api/bookings",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({dietitianId:Z,eventTypeId:aL||D,startTime:new Date(`${(0,x.default)(al).format("YYYY-MM-DD")}T${an}`).toISOString(),name:b,email:a,notes:J.complaint,userAge:J.age?parseInt(J.age):null,userOccupation:J.occupation||null,userMedicalCondition:J.medicalCondition||null,userMonthlyFoodBudget:J.monthlyFoodBudget?parseFloat(J.monthlyFoodBudget):null,userComplaint:J.complaint||null,sessionRequestId:E})});if(c.ok){let d=await c.json(),e=d.booking?.id||`booking-${Date.now()}`;aq({id:e,date:al,time:an,dietician:aF.find(a=>a.id===Z)?.name||"",duration:`${aJ.find(a=>a.id===aL)?.length||45}m`,meetingLink:""});try{let c=await fetch("/api/paystack/initialize",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({bookingId:e,amount:100*ax,email:a,name:b,metadata:{requestId:E||"",requestType:"CONSULTATION",description:`Consultation with ${aF.find(a=>a.id===Z)?.name||"Dietitian"}`}})});if(c.ok){let a=await c.json();if(a.authorization_url)window.location.href=a.authorization_url;else throw Error("No payment URL received")}else throw Error("Failed to initialize payment")}catch(a){console.error("Payment initialization error:",a),alert("Failed to initialize payment. Please try again.")}}else{let a=await c.json().catch(()=>({}));console.error("Failed to create booking:",a),alert("Failed to create booking. Please try again.")}}catch(a){console.error("Error creating booking:",a),alert("Error creating booking. Please try again.")}}else alert("Please select date, time, and dietitian before proceeding.")},a1=async()=>{if(al&&an&&Z&&E)try{if((await fetch(`/api/user/reschedule-booking/${E}`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({newDate:al.toISOString(),newTime:an})})).ok){let a=aF.find(a=>a.id===Z);aq({date:al,time:an,dietician:a?.name||"",duration:"45m",meetingLink:"https://meet.google.com/abc-defg-hij",isReschedule:!0}),I(7)}}catch(a){console.error("Error confirming reschedule:",a)}},a2=async a=>{if(as(!1),aw(a),al&&an&&Z){let b=J.email||L?.email||P,c=J.name||L?.name||R;if(!b||!c)return void alert("Email and name are required. Please ensure your profile is complete.");try{let d=await fetch("/api/bookings",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({dietitianId:Z,eventTypeId:aL||D,startTime:new Date(`${(0,x.default)(al).format("YYYY-MM-DD")}T${an}`).toISOString(),name:c,email:b,notes:J.complaint,userAge:J.age?parseInt(J.age):null,userOccupation:J.occupation||null,userMedicalCondition:J.medicalCondition||null,userMonthlyFoodBudget:J.monthlyFoodBudget?parseFloat(J.monthlyFoodBudget):null,userComplaint:J.complaint||null,sessionRequestId:E,paymentData:a})});if(d.ok){let a=aF.find(a=>a.id===Z),b=aJ.find(a=>a.id===aL),c=await d.json();aq({id:c.booking?.id||`booking-${Date.now()}`,date:al,time:an,dietician:a?.name||"",duration:`${b?.length||45}m`,meetingLink:c.booking?.meeting_link||""}),I(7);try{let a=await fetch("/api/user/profile",{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({age:J.age?parseInt(J.age):null,occupation:J.occupation||null,medical_condition:J.medicalCondition||null,monthly_food_budget:J.monthlyFoodBudget?parseFloat(J.monthlyFoodBudget):null})});a.ok||console.error("Failed to save profile:",await a.text())}catch(a){console.error("Error saving profile:",a)}E&&console.log(`Session request ${E} approved and booking created`)}}catch(a){console.error("Error creating booking:",a)}}};return(0,b.jsxs)("div",{className:"min-h-screen bg-[#0a0a0a] flex flex-col lg:flex-row",children:[(0,b.jsx)("div",{className:"lg:hidden",children:(0,b.jsx)(g.UserMobileHeader,{})}),(0,b.jsx)(f.UserDashboardSidebar,{}),(0,b.jsx)("main",{className:"flex-1 bg-[#101010] overflow-y-auto w-full lg:w-auto lg:ml-64 lg:rounded-tl-lg flex items-center justify-center p-4 lg:p-8 pb-20 lg:pb-8 pt-14 lg:pt-8",children:(0,b.jsxs)("div",{className:"w-full max-w-7xl bg-[#171717] border border-[#262626] rounded-lg shadow-xl",children:[H<7&&(0,b.jsx)("div",{className:"border-b border-[#262626] px-4 sm:px-8 py-3 sm:py-4",children:(0,b.jsx)("div",{className:"flex items-center gap-1 sm:gap-2 overflow-x-auto",children:[1,2,3].map(a=>{if(2===a&&A&&C&&!B)return null;let c=H>=3,d=H>=2||2===a&&A&&C,e=H>=1;return(0,b.jsxs)("div",{className:"flex items-center flex-shrink-0",children:[(0,b.jsx)("div",{className:`w-6 h-6 sm:w-8 sm:h-8 rounded-full flex items-center justify-center text-xs sm:text-sm font-medium ${1===a&&e||2===a&&d||3===a&&c?"bg-white text-black":"bg-[#262626] text-[#9ca3af]"}`,children:a}),a<3&&(0,b.jsx)("div",{className:`w-4 sm:w-8 md:w-12 h-0.5 ${1===a&&d||2===a&&c?"bg-white":"bg-[#262626]"}`})]},a)})})}),1===H&&(0,b.jsx)("div",{className:"flex justify-center p-4 md:p-8",children:(0,b.jsxs)("div",{className:"w-full max-w-5xl grid grid-cols-1 md:grid-cols-2 divide-y md:divide-y-0 md:divide-x divide-[#262626]",children:[(0,b.jsxs)("div",{className:"p-4 md:p-8 space-y-6",children:[(0,b.jsx)("div",{className:"flex items-center gap-2 mb-4",children:(0,b.jsx)(e.default,{src:"/daiyet logo.svg",alt:"Daiyet",width:100,height:30,className:"h-6 w-auto"})}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-4 relative",children:[(0,b.jsx)("h2",{className:"text-2xl font-semibold text-[#f9fafb] leading-tight flex-1 truncate",children:aL&&aJ.find(a=>a.id===aL)?.title||V[0]?.title||"1-on-1 Consultation with Licensed Dietician"}),V.length>0&&(0,b.jsxs)("div",{className:"relative event-type-dropdown flex-shrink-0",children:[(0,b.jsx)("button",{type:"button",onClick:()=>Y(!X),className:"w-8 h-8 rounded-full bg-[#FFF4E0] flex items-center justify-center hover:bg-[#ffe9c2] transition-colors",children:(0,b.jsx)(v.ChevronDown,{className:`h-4 w-4 text-black transition-transform ${X?"rotate-180":""}`})}),X&&(0,b.jsx)("div",{className:"absolute top-full right-0 mt-2 bg-[#171717] border border-[#262626] rounded-lg shadow-xl z-50 min-w-[300px] max-w-[90vw] max-h-[50vh] overflow-y-auto",children:V.map(a=>{let c=aL===a.id;return(0,b.jsxs)("button",{type:"button",onClick:()=>{aM(a.id),ay(a.price),Y(!1)},className:`w-full text-left px-4 py-3 text-sm transition-colors ${c?"bg-[#404040] text-[#f9fafb] font-medium":"text-[#f9fafb] hover:bg-[#262626]"}`,children:[(0,b.jsx)("div",{className:"font-medium truncate",children:a.title}),(0,b.jsxs)("div",{className:"text-xs text-[#9ca3af] mt-1",children:[a.length,"m â€¢ â‚¦",a.price.toLocaleString()]})]},a.id)})})]})]}),(0,b.jsx)("p",{className:"text-sm text-[#9ca3af] leading-relaxed mb-6",children:aL&&V.find(a=>a.id===aL)?.description||V[0]?.description||"Have one on one consultation with Licensed Dietitician [Nutritional counseling and treatment plan]"})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-2 sm:gap-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(r.Clock,{className:"h-4 w-4 sm:h-5 sm:w-5 text-[#9ca3af]"}),(0,b.jsxs)("span",{className:"text-xs sm:text-sm text-[#f9fafb]",children:[aL&&aJ.find(a=>a.id===aL)?.length||V[0]?.length||45,"m"]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(s.Video,{className:"h-4 w-4 sm:h-5 sm:w-5 text-[#9ca3af]"}),(0,b.jsx)("span",{className:"text-xs sm:text-sm text-[#f9fafb]",children:"Google Meet"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(q.Calendar,{className:"h-4 w-4 sm:h-5 sm:w-5 text-[#9ca3af]"}),(0,b.jsxs)("div",{className:"flex items-center gap-1 sm:gap-2",children:[(0,b.jsx)("span",{className:"text-xs sm:text-sm text-[#f9fafb]",children:"Africa/Lagos"}),(0,b.jsx)(o.ChevronRight,{className:"h-3 w-3 sm:h-4 sm:w-4 text-[#9ca3af]"})]})]})]}),(aL||V.length>0)&&(0,b.jsx)("div",{className:"bg-white rounded-lg px-2 py-1 sm:px-3 sm:py-1.5 mt-3 w-fit",children:(0,b.jsx)("span",{className:"text-base sm:text-lg font-semibold text-black",children:0===ax?"Free":`â‚¦${ax.toLocaleString()}`})})]})]}),(0,b.jsx)("div",{className:"p-4 md:p-8",children:(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-lg font-semibold text-[#f9fafb] mb-6",children:"Enter your information"}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-[#D4D4D4] mb-2",children:["Age ",(0,b.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,b.jsx)(j.Input,{type:"number",value:J.age,onChange:a=>{K({...J,age:a.target.value}),ah.age&&ai(a=>{let b={...a};return delete b.age,b})},className:`bg-[#0a0a0a] border-[#262626] text-[#f9fafb] ${ah.age?"border-red-500":""}`,placeholder:"Enter your age",min:"18",max:"120",required:!0}),ah.age&&(0,b.jsx)("p",{className:"text-xs text-red-400 mt-1",children:ah.age})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-[#D4D4D4] mb-2",children:["Occupation ",(0,b.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,b.jsx)(j.Input,{type:"text",value:J.occupation,onChange:a=>{K({...J,occupation:a.target.value}),ah.occupation&&ai(a=>{let b={...a};return delete b.occupation,b})},className:`bg-[#0a0a0a] border-[#262626] text-[#f9fafb] ${ah.occupation?"border-red-500":""}`,placeholder:"Enter your occupation",required:!0}),ah.occupation&&(0,b.jsx)("p",{className:"text-xs text-red-400 mt-1",children:ah.occupation})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-[#D4D4D4] mb-2",children:["Medical Condition ",(0,b.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,b.jsx)(k.Textarea,{value:J.medicalCondition,onChange:a=>{K({...J,medicalCondition:a.target.value}),ah.medicalCondition&&ai(a=>{let b={...a};return delete b.medicalCondition,b})},rows:3,className:`bg-[#0a0a0a] border-[#262626] text-[#f9fafb] ${ah.medicalCondition?"border-red-500":""}`,placeholder:"Any medical conditions or health concerns...",required:!0}),ah.medicalCondition&&(0,b.jsx)("p",{className:"text-xs text-red-400 mt-1",children:ah.medicalCondition})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-[#D4D4D4] mb-2",children:["Monthly Food Budget (NGN) ",(0,b.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,b.jsx)(j.Input,{type:"number",value:J.monthlyFoodBudget,onChange:a=>{K({...J,monthlyFoodBudget:a.target.value}),ah.monthlyFoodBudget&&ai(a=>{let b={...a};return delete b.monthlyFoodBudget,b})},className:`bg-[#0a0a0a] border-[#262626] text-[#f9fafb] ${ah.monthlyFoodBudget?"border-red-500":""}`,placeholder:"Enter your monthly food budget",min:"0",step:"1000",required:!0}),ah.monthlyFoodBudget&&(0,b.jsx)("p",{className:"text-xs text-red-400 mt-1",children:ah.monthlyFoodBudget})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-[#D4D4D4] mb-2",children:["Complaint / Additional Notes ",(0,b.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,b.jsx)(k.Textarea,{value:J.complaint,onChange:a=>{K({...J,complaint:a.target.value}),ah.complaint&&ai(a=>{let b={...a};return delete b.complaint,b})},rows:4,className:`bg-[#0a0a0a] border-[#262626] text-[#f9fafb] ${ah.complaint?"border-red-500":""}`,placeholder:"Tell us about your concerns, goals, or any special requirements...",required:!0}),ah.complaint&&(0,b.jsx)("p",{className:"text-xs text-red-400 mt-1",children:ah.complaint})]})]}),(0,b.jsx)("div",{className:"flex gap-3 mt-6",children:(0,b.jsx)(i.Button,{onClick:()=>{let a=(()=>{let a={};if(J.age&&""!==J.age.trim()){let b=parseInt(J.age);isNaN(b)?a.age="Age must be a valid number":b<18&&(a.age="Age must be at least 18")}else a.age="Age is required";if(J.occupation&&""!==J.occupation.trim()||(a.occupation="Occupation is required"),J.medicalCondition&&""!==J.medicalCondition.trim()||(a.medicalCondition="Medical condition is required"),J.monthlyFoodBudget&&""!==J.monthlyFoodBudget.trim()){let b=parseFloat(J.monthlyFoodBudget);(isNaN(b)||b<0)&&(a.monthlyFoodBudget="Monthly food budget must be a valid positive number")}else a.monthlyFoodBudget="Monthly food budget is required";return J.complaint&&""!==J.complaint.trim()||(a.complaint="Complaint/Additional notes is required"),a})();Object.keys(a).length>0?ai(a):(ai({}),A&&C?I(3):I(2))},className:"bg-[#FFF4E0] hover:bg-[#ffe9c2] text-black px-6 py-2",children:"Continue"})})]})})]})}),2===H&&!(A&&C)&&(0,b.jsx)("div",{className:"flex justify-center p-4 md:p-8",children:(0,b.jsxs)("div",{className:"w-full max-w-5xl grid grid-cols-1 md:grid-cols-2 divide-y md:divide-y-0 md:divide-x divide-[#262626]",children:[(0,b.jsxs)("div",{className:"p-4 md:p-8 space-y-6",children:[(0,b.jsx)("div",{className:"flex items-center gap-2 mb-4",children:(0,b.jsx)(e.default,{src:"/daiyet logo.svg",alt:"Daiyet",width:100,height:30,className:"h-6 w-auto"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-2xl font-semibold text-[#f9fafb] mb-4 line-clamp-2",children:aL&&aJ.find(a=>a.id===aL)?.title||V[0]?.title||"1-on-1 Consultation with Licensed Dietician"}),(0,b.jsx)("p",{className:"text-sm text-[#9ca3af] leading-relaxed mb-6",children:aL&&V.find(a=>a.id===aL)?.description||V[0]?.description||"Have one on one consultation with Licensed Dietitician [Nutritional counseling and treatment plan]"})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(r.Clock,{className:"h-5 w-5 text-[#9ca3af]"}),(0,b.jsxs)("span",{className:"text-sm text-[#f9fafb]",children:[aL&&aJ.find(a=>a.id===aL)?.length||V[0]?.length||45,"m"]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(s.Video,{className:"h-5 w-5 text-[#9ca3af]"}),(0,b.jsx)("span",{className:"text-sm text-[#f9fafb]",children:"Google Meet"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(q.Calendar,{className:"h-5 w-5 text-[#9ca3af]"}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:"text-sm text-[#f9fafb]",children:"Africa/Lagos"}),(0,b.jsx)(o.ChevronRight,{className:"h-4 w-4 text-[#9ca3af]"})]})]})]})]}),(0,b.jsx)("div",{className:"p-4 md:p-8",children:(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-lg font-semibold text-[#f9fafb] mb-6",children:"Select Dietician"}),aH?null:0===aF.length?(0,b.jsx)("div",{className:"text-center py-8",children:(0,b.jsx)("div",{className:"text-[#9ca3af]",children:"No dietitians available"})}):(0,b.jsx)("div",{className:"space-y-4",children:aF.map(a=>{let c=Z===a.id,d=A&&B;return(0,b.jsx)("div",{className:`border rounded-lg p-4 transition-all ${d?"opacity-50 cursor-not-allowed border-[#262626] bg-transparent":c?"border-white bg-[#171717] ring-1 ring-white/30 cursor-pointer":"border-[#262626] bg-transparent hover:bg-[#171717] cursor-pointer"}`,onClick:()=>!d&&$(a.id),children:(0,b.jsxs)("div",{className:"flex items-start gap-4",children:[(0,b.jsx)("div",{className:"flex-shrink-0",children:(0,b.jsx)("div",{className:"w-16 h-16 rounded-full overflow-hidden bg-[#262626]",children:a.profileImage?(0,b.jsx)(e.default,{src:a.profileImage,alt:a.name,width:64,height:64,className:"w-full h-full object-cover grayscale"}):(0,b.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,b.jsx)("span",{className:"text-white text-lg font-semibold",children:a.name.charAt(0)})})})}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("h3",{className:"text-sm font-medium text-[#f9fafb] mb-1",children:a.name}),c&&(0,b.jsxs)("div",{className:"flex items-center gap-1 text-xs text-white bg-[#2b2b2b] px-2 py-1 rounded-full",children:[(0,b.jsx)(p.Check,{className:"h-3 w-3"}),"Selected"]})]}),(0,b.jsx)("p",{className:"text-xs text-[#9ca3af]",children:a.qualification})]}),(0,b.jsx)(i.Button,{variant:"outline",className:"bg-transparent border-[#262626] text-[#f9fafb] hover:bg-[#171717] px-3 py-1 text-xs flex-shrink-0",onClick:async b=>{b.stopPropagation(),aa(a);let c=af.get(a.id);if(c)ac(c),ae(!1),console.log("âš¡ Using preloaded profile:",c);else{ae(!0);try{let b=await fetch(`/api/dietitians/${a.id}`,{credentials:"include"});if(b.ok){let c=await b.json(),d={id:c.profile.id,name:c.profile.name,email:c.profile.email,bio:c.profile.bio,image:c.profile.image,specialization:c.profile.specialization,licenseNumber:c.profile.licenseNumber,experience:c.profile.experience,location:c.profile.location,qualifications:c.profile.qualifications||[],updatedAt:c.profile.updatedAt};ac(d),ag(b=>{let c=new Map(b);return c.set(a.id,d),c}),console.log("âœ… Loaded and cached full profile:",d)}else{let a=await b.json().catch(()=>({}));console.error("Failed to load full profile:",a)}}catch(a){console.error("Failed to load full profile:",a)}finally{ae(!1)}}},children:"View Profile"})]})},a.id)})}),(0,b.jsx)("div",{className:"flex gap-3 mt-6",children:A&&C?null:(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(i.Button,{onClick:()=>I(1),variant:"outline",className:"bg-transparent border-[#262626] text-[#f9fafb] hover:bg-[#171717] px-6 py-2",children:"Back"}),(0,b.jsx)(i.Button,{onClick:()=>I(3),disabled:!Z,className:"bg-white hover:bg-gray-100 text-black px-6 py-2 disabled:opacity-50",children:"Continue"})]})})]})})]})}),3===H&&(0,b.jsx)("div",{className:"flex justify-center p-4 md:p-8",children:(0,b.jsx)("div",{className:"w-full max-w-md mx-auto",children:(0,b.jsx)("div",{className:"p-4 md:p-8",children:(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsx)("button",{onClick:()=>{let a=(0,x.default)(aj).subtract(1,"month");ak(a),Z&&aL&&a.format("YYYY-MM")},className:"text-[#D4D4D4] hover:text-[#f9fafb]",children:(0,b.jsx)(n.ChevronLeft,{className:"h-5 w-5"})}),(0,b.jsx)("h3",{className:"text-sm font-medium text-[#f9fafb]",children:aj.format("MMMM YYYY")}),(0,b.jsx)("button",{onClick:()=>{let a=(0,x.default)(aj).add(1,"month");ak(a),Z&&aL&&a.format("YYYY-MM")},className:"text-[#D4D4D4] hover:text-[#f9fafb]",children:(0,b.jsx)(o.ChevronRight,{className:"h-5 w-5"})})]}),(0,b.jsx)("div",{className:"grid grid-cols-7 gap-1 mb-2",children:["SUN","MON","TUE","WED","THU","FRI","SAT"].map(a=>(0,b.jsx)("div",{className:"text-xs text-[#9ca3af] text-center py-2",children:a},a))}),(0,b.jsxs)("div",{className:"grid grid-cols-7 gap-1",children:[Array.from({length:aZ}).map((a,c)=>(0,b.jsx)("div",{className:"h-10"},`empty-${c}`)),Array.from({length:aY}).map((a,c)=>{let d,e=c+1,f=(d=aj.date(e).format("D"),aR.includes(d)),g=!!al&&(0,x.default)(al).isSame(aj.date(e),"day"),h=(0,x.default)().isSame(aj.date(e),"day");return(0,b.jsx)("button",{onClick:()=>{let a;am(a=aj.date(e).toDate()),ao(""),Z&&aL&&(0,x.default)(a).format("YYYY-MM"),Z&&a$(a)},className:`h-10 rounded text-sm transition-colors ${g?"bg-white text-black font-medium":f?"bg-[#262626] text-[#f9fafb] hover:bg-[#404040]":"text-[#9ca3af] opacity-50 cursor-not-allowed"} ${h&&!g?"ring-1 ring-[#404040]":""}`,disabled:!f,children:e},e)})]}),(0,b.jsx)("div",{className:"mt-4 text-center",children:(0,b.jsx)("span",{className:"text-xs text-[#9ca3af]",children:"Cal.com"})}),(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 mt-6",children:[(0,b.jsx)(i.Button,{onClick:()=>{A&&C?I(1):I(2)},variant:"outline",className:"w-full sm:w-auto bg-transparent border-[#262626] text-[#f9fafb] hover:bg-[#171717] px-6 py-2",children:"Back"}),(0,b.jsx)(i.Button,{onClick:()=>I(4),disabled:!al,className:"w-full sm:w-auto bg-white hover:bg-gray-100 text-black px-6 py-2 disabled:opacity-50",children:"Continue"})]})]})})})}),4===H&&(0,b.jsx)("div",{className:"flex justify-center p-4 md:p-8",children:(0,b.jsx)("div",{className:"w-full max-w-md mx-auto",children:(0,b.jsxs)("div",{className:"p-4 md:p-8",children:[(0,b.jsxs)("div",{className:"mb-6",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold text-[#f9fafb] mb-2",children:"Select Time"}),al&&(0,b.jsx)("p",{className:"text-sm text-[#9ca3af]",children:(0,x.default)(al).format("dddd, MMMM D, YYYY")})]}),(0,b.jsxs)("div",{className:"flex items-center justify-end gap-2 mb-4",children:[(0,b.jsx)("button",{className:"text-xs px-3 py-1.5 bg-white text-black rounded font-medium",children:"12h"}),(0,b.jsx)("button",{className:"text-xs px-3 py-1.5 bg-transparent text-[#9ca3af] rounded border border-[#262626]",children:"24h"})]}),(0,b.jsx)("div",{className:"space-y-2 max-h-[400px] overflow-y-auto mb-6",children:aP?(0,b.jsx)("div",{className:"text-center py-8 text-sm text-[#9ca3af]",children:"Loading available times..."}):0===aN.length?(0,b.jsx)("div",{className:"text-center py-8 text-sm text-[#9ca3af]",children:"No available times for this date"}):aN.map(a=>{let c=an===a;return(0,b.jsxs)("button",{onClick:()=>{ao(a)},className:`w-full h-12 rounded text-sm flex items-center gap-2 px-4 transition-colors ${c?"bg-white text-black font-medium":"bg-transparent border border-[#262626] text-[#f9fafb] hover:bg-[#171717]"}`,children:[(0,b.jsx)("div",{className:`w-2 h-2 rounded-full ${c?"bg-black":"bg-green-500"}`}),a_(a)]},a)})}),(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[(0,b.jsx)(i.Button,{onClick:()=>I(3),variant:"outline",className:"w-full sm:w-auto bg-transparent border-[#262626] text-[#f9fafb] hover:bg-[#171717] px-6 py-2",children:"Back"}),(0,b.jsx)(i.Button,{onClick:()=>I(5),disabled:!an,className:"w-full sm:w-auto bg-white hover:bg-gray-100 text-black px-6 py-2 disabled:opacity-50",children:"Continue"})]})]})})}),5===H&&(0,b.jsx)("div",{className:"flex justify-center p-4 md:p-8",children:(0,b.jsx)("div",{className:"w-full max-w-2xl",children:(0,b.jsxs)("div",{className:"p-4 md:p-8",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold text-[#f9fafb] mb-6",children:"Order Summary"}),(0,b.jsxs)("div",{className:"border border-[#262626] rounded-lg p-6 space-y-3 mb-6",children:[(0,b.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,b.jsx)("span",{className:"text-[#9ca3af]",children:"Dietician"}),(0,b.jsx)("span",{className:"text-[#f9fafb]",children:az||aF.find(a=>a.id===Z)?.name||"Not selected"})]}),(0,b.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,b.jsx)("span",{className:"text-[#9ca3af]",children:"Date"}),(0,b.jsx)("span",{className:"text-[#f9fafb]",children:al?(0,x.default)(al).format("MMM D, YYYY"):""})]}),(0,b.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,b.jsx)("span",{className:"text-[#9ca3af]",children:"Time"}),(0,b.jsx)("span",{className:"text-[#f9fafb]",children:a_(an)})]}),(0,b.jsxs)("div",{className:"flex justify-between text-sm gap-2",children:[(0,b.jsx)("span",{className:"text-[#9ca3af] flex-shrink-0",children:"Service Type"}),(0,b.jsx)("span",{className:"text-[#f9fafb] truncate text-right",children:aJ.find(a=>a.id===aL)?.title||"Not selected"})]}),(0,b.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,b.jsx)("span",{className:"text-[#9ca3af]",children:"Duration"}),(0,b.jsxs)("span",{className:"text-[#f9fafb]",children:[aJ.find(a=>a.id===aL)?.length||45," minutes"]})]}),(0,b.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,b.jsx)("span",{className:"text-[#9ca3af]",children:"Email"}),(0,b.jsx)("span",{className:"text-[#f9fafb]",children:P||aD||J.email||L?.email||"N/A"})]}),J.age&&(0,b.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,b.jsx)("span",{className:"text-[#9ca3af]",children:"Age"}),(0,b.jsx)("span",{className:"text-[#f9fafb]",children:J.age})]}),J.occupation&&(0,b.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,b.jsx)("span",{className:"text-[#9ca3af]",children:"Occupation"}),(0,b.jsx)("span",{className:"text-[#f9fafb]",children:J.occupation})]}),(0,b.jsx)("div",{className:"border-t border-[#262626] pt-3 mt-3",children:(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-sm font-medium text-[#f9fafb]",children:"Total"}),(0,b.jsxs)("span",{className:"text-lg font-semibold text-[#f9fafb]",children:["â‚¦",ax.toLocaleString()]})]})})]}),(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[(0,b.jsx)(i.Button,{onClick:()=>I(4),variant:"outline",className:"w-full sm:w-auto bg-transparent border-[#262626] text-[#f9fafb] hover:bg-[#171717] px-6 py-2",children:"Back"}),(0,b.jsx)(i.Button,{onClick:a0,className:"w-full sm:w-auto bg-white hover:bg-gray-100 text-black px-6 py-2",children:B?"Confirm Reschedule":"Proceed to Payment"})]})]})})}),7===H&&ap&&(0,b.jsxs)("div",{className:"p-8 text-center",children:[(0,b.jsx)("div",{className:"w-16 h-16 bg-green-500 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,b.jsx)(p.Check,{className:"h-8 w-8 text-white"})}),(0,b.jsx)("h2",{className:"text-2xl font-semibold text-[#f9fafb] mb-2",children:"Booking Confirmed!"}),(0,b.jsx)("p",{className:"text-sm text-[#9ca3af] mb-6",children:"Your booking has been confirmed"}),(0,b.jsxs)("div",{className:"border border-[#262626] rounded-lg p-6 space-y-4 text-left max-w-md mx-auto",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(q.Calendar,{className:"h-5 w-5 text-[#9ca3af]"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-xs text-[#9ca3af]",children:"Date"}),(0,b.jsx)("div",{className:"text-sm text-[#f9fafb]",children:(0,x.default)(ap.date).format("MMM D, YYYY")})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(r.Clock,{className:"h-5 w-5 text-[#9ca3af]"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-xs text-[#9ca3af]",children:"Time"}),(0,b.jsx)("div",{className:"text-sm text-[#f9fafb]",children:a_(ap.time)})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(r.Clock,{className:"h-5 w-5 text-[#9ca3af]"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-xs text-[#9ca3af]",children:"Duration"}),(0,b.jsx)("div",{className:"text-sm text-[#f9fafb]",children:ap.duration})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(s.Video,{className:"h-5 w-5 text-[#9ca3af]"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-xs text-[#9ca3af]",children:"Meeting Link"}),(0,b.jsxs)("a",{href:ap.meetingLink,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-400 hover:underline flex items-center gap-1",children:[ap.meetingLink,(0,b.jsx)(t.ExternalLink,{className:"h-3 w-3"})]})]})]})]}),(0,b.jsxs)("div",{className:"space-y-3 mt-6 max-w-md mx-auto",children:[(0,b.jsx)(i.Button,{onClick:()=>window.open(ap.meetingLink,"_blank"),className:"w-full bg-white hover:bg-gray-100 text-black px-6 py-2",children:"Join Meeting"}),(0,b.jsx)("div",{className:"text-sm text-[#9ca3af] mb-2",children:"Add to Calendar"}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(i.Button,{variant:"outline",className:"flex-1 bg-transparent border-[#262626] text-[#f9fafb] hover:bg-[#171717] px-4 py-2 text-xs",children:"Google Calendar"}),(0,b.jsx)(i.Button,{variant:"outline",className:"flex-1 bg-transparent border-[#262626] text-[#f9fafb] hover:bg-[#171717] px-4 py-2 text-xs",children:"Outlook"}),(0,b.jsx)(i.Button,{variant:"outline",className:"flex-1 bg-transparent border-[#262626] text-[#f9fafb] hover:bg-[#171717] px-4 py-2 text-xs",children:"iCal"})]}),(0,b.jsx)(i.Button,{onClick:()=>{I(1),am(null),ao(""),$(""),aq(null)},variant:"outline",className:"w-full bg-transparent border-[#262626] text-[#f9fafb] hover:bg-[#171717] px-6 py-2",children:"Book Another Session"})]})]})]})}),!B&&(0,b.jsx)(l.PaymentModal,{isOpen:ar,onClose:()=>{as(!1),I(5)},onSuccess:a2,amount:ax,currency:"NGN",description:Z&&aF.find(a=>a.id===Z)?`Consultation with ${aF.find(a=>a.id===Z)?.name}`:"Consultation Booking",requestType:"CONSULTATION",requestId:E||void 0,bookingId:ap?.id||void 0,userEmail:J.email||L?.email||P||"",userName:J.name||L?.name||R||""}),(0,b.jsx)(m.PaymentSuccessModal,{isOpen:at,onClose:()=>{au(!1),z.push("/user-dashboard/upcoming-meetings")},requestType:"CONSULTATION",amount:av?.amount||ax||15e3,currency:av?.currency||"NGN",bookingDetails:ap,onViewDetails:()=>{au(!1),z.push("/user-dashboard/upcoming-meetings")}}),_&&(0,b.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:(0,b.jsxs)("div",{className:"bg-[#171717] border border-[#262626] rounded-lg w-full max-w-2xl p-6 shadow-lg",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold text-[#f9fafb]",children:"Dietician Profile"}),(0,b.jsx)("button",{onClick:()=>aa(null),className:"text-[#D4D4D4] hover:text-[#f9fafb] transition-colors",children:(0,b.jsx)(u.X,{className:"h-5 w-5"})})]}),(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)("div",{className:"flex justify-center",children:(0,b.jsx)("div",{className:"w-32 h-32 rounded-full overflow-hidden bg-[#262626]",children:_.profileImage?(0,b.jsx)(e.default,{src:_.profileImage,alt:_.name,width:128,height:128,className:"w-full h-full object-cover grayscale"}):(0,b.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,b.jsx)("span",{className:"text-white text-3xl font-semibold",children:_.name.charAt(0)})})})}),(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("h3",{className:"text-xl font-semibold text-[#f9fafb] mb-2",children:_.name}),(0,b.jsx)("p",{className:"text-sm text-[#9ca3af]",children:_.qualification})]}),(0,b.jsxs)("div",{className:"border-t border-[#262626] pt-6",children:[(0,b.jsx)("h4",{className:"text-sm font-medium text-[#D4D4D4] mb-3",children:"Professional Summary"}),ad?(0,b.jsx)("p",{className:"text-sm text-[#9ca3af]",children:"Loading..."}):(0,b.jsx)("p",{className:"text-sm text-[#9ca3af] leading-relaxed whitespace-pre-line",children:ab?.bio||_.description||"No professional summary available."}),ab?.updatedAt&&!ad&&(0,b.jsxs)("div",{className:"text-xs text-[#9ca3af] pt-3 mt-3 border-t border-[#262626]",children:["Profile updated: ",new Date(ab.updatedAt).toLocaleString()]})]}),(0,b.jsx)("div",{className:"flex justify-end pt-4 border-t border-[#262626]",children:(0,b.jsx)(i.Button,{onClick:()=>aa(null),className:"bg-white hover:bg-gray-100 text-black px-6 py-2",children:"Close"})})]})]})}),(0,b.jsx)("div",{className:"lg:hidden",children:(0,b.jsx)(h.UserBottomNavigation,{})})]})}function A(){return(0,b.jsx)(c.Suspense,{fallback:(0,b.jsx)("div",{className:"min-h-screen bg-[#0a0a0a] flex items-center justify-center",children:(0,b.jsx)("div",{className:"text-white",children:"Loading booking page..."})}),children:(0,b.jsx)(z,{})})}a.s(["default",()=>A],27167)}];

//# sourceMappingURL=Desktop_daiyet-app_app_user-dashboard_book-a-call_page_tsx_7237640d._.js.map